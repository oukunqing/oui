<html>
	<head>
		<style type="text/css">
			body{margin:5px;padding:0;font-size: 14px;font-family: Arial,宋体;}
			.txt {padding: 5px;border:solid 1px #00f;border-radius: 5px;outline: none;width:1010px;height:500px;}
			.btn {padding:0 15px;height:30px;}
			.div {padding: 5px;border:solid 1px #f50;width:1000px;border-radius: 5px; line-height:24px;}
		</style>
	</head>
	<body>
		<div>
			<textarea id="content" class="txt" placeholder="请复制JS代码，粘贴到这里"></textarea>
			<div style="margin:5px 0;">
				<button id="btncheck" class="btn" onclick="check();">检测</button>
			</div>
		</div>
		<div id="result" class="div"></div>
	</body>
</html>
<script type="text/javascript" src="oui/oui.min.js"></script>
<script type="text/javascript">
function check() {
	var con = $I('content').value.split(/\r\n|\n/g),
		len = con.length, i, c, lines = [], charL, charF,
		annotate = 0;

	for (i = 0; i < len - 1; i++) {
		var s = con[i].trim(), ns = con[i + 1].trim(), c = s.length,
			ts = s.replace(/[\s]/g, '');
		
		if (c > 0) {
			charL = s[c - 1];
			charF = ns[0] || '';
			if (s.startWith('/*')) {
				annotate = true;
			} else if (s.endWith('*/')) {
				annotate = false;
			}
			if (ts.endWith('={}') || ts.endWith('=[]') || (!ts.endWith(';') && ns === '')) {
				;
			} else if (annotate 
				|| s.indexOf('//') > -1 
				|| s.indexOf('case ') > -1
				|| s.inArray(['default:', '*/'])
				|| /(:[\s]?['"])/i.test(s)
				|| charL.inArray(['{', '}',';','[',','])
				|| ns.startWith('&&') || ns.startWith('||') 
				|| charF.inArray(['}', ']', '.', ','])) {
				continue;
			}
			lines.push(i + 1);
		}
	}
	var len = lines.length;
	if (!len) {
		$('#result').html('Nothing');
	} else {
		$('#result').html('Find ' + len + ' lines:<br />' + lines.join(', '));
	}
}
</script>