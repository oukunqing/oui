<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>对话框插件测试（未完） - OUI</title>
    <script type="text/javascript" src="../oui/oui.js?1"></script>
    <script type="text/javascript" src="../oui/dialog/oui.dialog.js?1"></script>
</head>
</head>
<body>
    <div id="p1" style="height:400px;"></div>
    <div id="t1"></div>
    <input id="txt2" type="input" />
    <input id="txt1" type="input" />
    <button onclick="paging();">分页</button>
    <button onclick="showTable();">显示表格</button>
    <button onclick="alert2();">Alert</button>
    <button onclick="confirm2();">Confirm</button>
    <button onclick="win();">Win</button>
    <button onclick="load();">Load</button>
    <button onclick="msg();">Msg</button>
    <button onclick="tips();">Tips</button>
    <button onclick="update();">更新对话框</button>
</body>
</html>
<script type="text/javascript">

function alert2(){
    var dialog = $.alert('Hello!对话框', {
        id: 3, position: 5, maxHeight: 360, maxWidth: 500, lock: true, clickBgClose: 'dblclick', 
        escClose: true, autoClose: true, closeTiming: 10000,
        maxAble: true, minAble: true, closeAble: true,
        //buttons: $.DialogButtons.OK, 
        showTitle: true,
        callback: function(dialogResult, d, param) {
            console.log(dialogResult, d, param);
            if(dialogResult.OK || dialogResult.Yes) {
                alert('OK');
            } else if(dialogResult.Cancel) {
                alert('Cancel');
            }
        },
        param: {id:123, name:'Tom'}
    });

    //console.log('dialog: ', dialog);
    /*
    window.setTimeout(function(){
        dialog.setScale({
            dir: 'bottom-right',
            x: 100,
            y: 80
        });
    }, 8000);


    window.setTimeout(function(){
        dialog.setScale({
            dir: 'center',
            x: 120,
            y: 88
        });
    }, 15000);
*/

    //dialog.setZindex(1000);

    window.setTimeout(function() {
        //dialog.setZindex(2000);
        dialog.append(getCon(16, '大家好'), {height:'auto'});

        dialog.setOption('topMost', true);
    }, 3000);
}

function confirm2(){
    var win = $.confirm('确定要保存内容吗？', '保存', {
        buttons: $.DialogButtons.OKCancel,
        type: 'confirm',
        success: function() {
            alert('success: ');
        },
        callback: function(dialogResult, d) {
            if(dialogResult.OK || dialogResult.Yes) {
                alert('点击了确定按钮');
            } else {
                alert('点击了取消按钮');
            }
        }
    });
}

function win(){
    var win = $.dialog.win({content:'这是普通窗口模式'});
    $.dialog.closeAll('tooltip').dialog('你好');
}

function load(){
    var win = $.dialog.load('pagination.html', {maxWidth:800, maxHeight:500});
}

function msg(){
    var win = $.dialog.msg('msg: 这是普通窗口模式', {id: 'msg', autoClose: false, closeTiming: 15000, fixed: false, position: 5, lock: false});

    window.setTimeout(function() {
        //win.update('请注意：提示信息改变了。请注意：提示信息改变了', {width:'auto'});
        win.update('请注意：提示信息改变了。请注意：提示信息改变了', '', 'autosize');
    }, 3000);
}

function tips(){
    var win = $.dialog('tips: 提示信息', {type:'tips',position: 6});

    tips2();
}

function tips2(){
    var win = $.tips('tips: 提示信息2', {position: 3});
}

function update() {
    var str = '';
    for(var i=0; i<35; i++){
        str += (i + 1) + '. 内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了<br />';
    }
    var dialog = $.alert('Hello!对话框<br />' + str, {id:2, lock: false, escClose: true, autoClose: false});

    //dialog.setZindex(1005);

    dialog.setOption('topMost', true);

    update2();
}

function getCon(rows, txt) {
    var str = '';
    for(var i=0; i<rows; i++){
        str += (i + 1) + (txt || '. 内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了') + '<br />';
    }
    return str;
}


function update2() {
    var str = getCon(3);
    var dialog = $.alert('Hello!对话框22<br />' + str, {
        id:12, lock: false, minAble: true, maxAble: true, escClose: true, autoClose: false
    });

    dialog.setOption('topMost', true);

    window.setTimeout(function(){
        dialog.update(getCon(5), '第1次改变','autoheight');
    }, 5000);

    window.setTimeout(function(){
        dialog.update(getCon(2), {width:'auto', height:'auto'});
    }, 8000);

    window.setTimeout(function(){
        dialog.update(getCon(7), '第2次改变');
    }, 10000);

    window.setTimeout(function(){
        dialog.update(getCon(32), '', 'autosize');
    }, 10000);
}


$.setAttribute($I('txt1'), {
    tree: {id:1, pid:0, level:0}, list: [1,2,3], arr:[{id:1},{id:2}], name: 'txt',
    obj: $I('txt2')
}, true, true);

var txt1 = $I('txt1');
txt1.style.cssText += 'background:#f00;';

var tree = $I('txt1').getAttribute('tree');
console.log(tree, typeof tree, typeof $.toJson(tree), $.toJson(tree).id);

console.log($.Pagination);

function paging(){
    var node = $.loadJsScript('../oui/pagination/oui.pagination.min.js', function(){
        console.log('分页');
        var p1 = new OUI.Pagination({
            parent: $('#p1')[0],
            dataCount: 11912,
            markCount: 10,
            pageIndex: 1,
            pageStart: 1,
            pageSize: 12,
            showPageInput: true,
            showPageJump: true,
            showList: true,
            //skin: 'red',
            markType: 'chinese',
            //url: '?pageIndex={0}&type=2&pid=32',
            //sizeOptions: [10, 20, 30],
            callback: function(pageIndex, param){
                console.log('p1-callback: ', pageIndex, ', param: ', param);

                p1.paging(pageIndex);
            },
            useKeyEvent: true,
            inputWidth: 55,
            callbackParam: {
                id: 123, prompt: '这是回调参数'
            }
        });
    });

    console.log('node: ', node.id, node);
}

function showTable(){
    var node = $.loadJsScript('../oui/table/oui.table.js', function(){

        var headData = [
            {
                rowData:{
                    style:{background:'#005eac'}
                }, cellData: ['表头11', '表头12', '表头13', '表头14', '表头15', '表头16']
            },
            {
                rowData:{
                    style:{background:'#005eac'}
                }, cellData: ['表头21', '表头22', '表头23', '表头24', '表头25', '表头26']
            },
            ['表头31', '表头33', '表头33', '表头34', '表头35', '表头36']
        ];
        var bodyData = [
            {
                rowData:{ attribute:{ id:1, class:'tr-1'}, event:{click:function(){alert(this.id);}}}, treeData:{id:1, pid:0}, cellData:[
                    {content:'单元格11', style:{color:'#f00'}}, {content:'单元格12'}, {content:'单元格13'}, {content:'单元格14'}, {content:'单元格15'}, {content:'单元格16'}
                ]
            },
            {
                rowData: {}, treeData:{id:2, pid:1}, cellData:[
                    {content:'单元格21', style:'color:#00f;'}, {content:'单元格22'}, {content:'单元格23'}, {content:'单元格24'}, {content:'单元格25'}, {content:'单元格26'}
                ]
            },
            {
                rowData: {}, treeData:{id:4, pid:2}, cellData:[
                    {content:'单元格41'}, {content:'单元格42'}, {content:'单元格43'}, {content:'单元格44'}, {content:'单元格45'}, {content:'单元格46'}
                ]
            },
            {
                rowData: {}, treeData:{id:3, pid:1}, cellData:[
                    {content:'单元格31'}, {content:'单元格32'}, {content:'单元格33'}, {content:'单元格34'}, {content:'单元格35'}, {content:'单元格36'}
                ]
            },
            {
                rowData: {}, treeData:{id:5, pid:2}, cellData:[
                    {content:'单元格51'}, {content:'单元格52'}, {content:'单元格53'}, {content:'单元格54'}, {content:'单元格55'}, {content:'单元格56'}
                ]
            },
            {
                rowData: {}, treeData:{id:6, pid:4}, cellData:[
                    {content:'单元格61'}, {content:'单元格62'}, {content:'单元格63'}, {content:'单元格64'}, {content:'单元格65'}, {content:'单元格66'}
                ]
            },
            {
                rowData: {}, treeData:{id:7, pid:2}, cellData:[
                    {content:'单元格71'}, {content:'单元格72'}, {content:'单元格73'}, {content:'单元格74'}, {content:'单元格75'}, {content:'单元格76'}
                ]
            },
            {
                rowData: {}, treeData:{id:8, pid:2}, cellData:[
                    {content:'单元格81'}, {content:'单元格82'}, {content:'单元格83'}, {content:'单元格84'}, {content:'单元格85'}, {content:'单元格86'}
                ]
            },
            {
                rowData: {}, treeData:{id:9, pid:3}, cellData:[
                    {content:'单元格91'}, {content:'单元格92'}, {content:'单元格93'}, {content:'单元格94'}, {content:'单元格95'}, {content:'单元格96'}
                ]
            }
        ];

        var tb = new $.Table({
            table: 'tblist',                //表格（对象 或 Id 或 null)，为null则自动创建表格对象（可以不设置）
            className: 'tblist',
            parent: document.getElementById('t1'),          //表格父节点，默认为 document.body （可以不设置）
            headData: headData,             //初始化时要创建的表格头部数据（可以不设置），数据格式参考示例说明
            bodyData: bodyData,                 //初始化时要创建的表格主体数据（可以不设置），数据格式参考示例说明
            showTree: true,                 //是否显示树形结构，boolean值： true | false, 默认为false（可以不设置）
            treeCellIndex: 0,               //要显示树形结构的列索引，从0开始，默认为0（可以不设置）
            trigger: {                      //树形收缩/展开触发器，若cell和row同时设置了不同的事件，可能会有事件冒泡
                cell: ['click', 'toggle'],  //点击列触发事件，数组或字符串，第1个元素为事件：(click, dblclick)，第2个元素为动作： (toggle, expand, collapse)
                //row: 'click'                //点击行触发事件，数组或字符串，第1个元素为事件：(click, dblclick)，第2个元素为动作： (toggle, expand, collapse)
            },
            treeOptions:{                   //树形结构参数
                spaceWidth: 16,             //树形每一层之间的缩进距离，单位为px，默认为16px（可以不设置）
                /*className: {                //树形结构箭头图标样式
                    expand: 'expand',       //节点展开时的样式
                    collapse: 'collapse'    //节点收缩时的样式
                },
                */
                //className: ['expand', 'collapse'] //可以数组形式，第1个元素为节点展开的样式
            } 
        });
    });

    console.log('node: ', node.id, node.src, node.getAttribute('src'), node);
}

</script>