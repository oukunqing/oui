<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title></title>
    <script type="text/javascript" src="../oui/oui.js?1"></script>
    <script type="text/javascript" src="../oui/dialog/oui.dialog.js"></script>
</head>
<body>
    <div id="p1" style="height:400px;">
        <input type="input" name="" id="txtTips" style="margin:240px 100px;" value="这是文本输入框的内容" />
    </div>
    <div id="t1"></div>
    <input id="txt2" type="input" />
    <input id="txt1" type="input" />
    <br />
    <button onclick="paging();">分页</button>
    <button onclick="showTable();">显示表格</button>
    <button onclick="alert2();">Alert</button>
    <button onclick="confirm2();">Confirm</button>
    <button onclick="win();">Win</button>
    <button onclick="form2();">Form</button>
    <br />
    <button onclick="load();">Load</button>
    <button onclick="load2('divArticle');">Load Element</button>
    <button onclick="msg();">Msg</button>
    <button onclick="tips();">Tips</button>
    <button onclick="update();">更新对话框</button>
    <button onclick="percent();">百分比尺寸</button>

    <div id="divArticle" style="display: none;">
        这是来自 DIV #divArticle 的内容
        <br />
        OUI - JS代码库
        <br />
        oui.js
        <br />
        oui.dialog.js
        <br />
        $.alert('Hello World!');
        <br />
    </div>
</body>
</html>
<script type="text/javascript">

/*
document.onclick = function() {
    console.log('document.onclick-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onmousedown = function() {
    console.log('document.onmousedown-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onmousemove = function() {
    console.log('document.onmousemove-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onmouseup = function() {
    console.log('document.onmouseup-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onkeydown = function() {
    console.log('document.onkeydown-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onkeyup = function() {
    console.log('document.onkeyup-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

document.onkeypress = function() {
    console.log('document.onkeypress-' + new Date().getMinutes() +'-' + new Date().getSeconds());
};

*/

function alert2(){
    var dialog = $.alert('Hello!对话框', {
        id: 3, position: 5, maxHeight: 360, maxWidth: 500, 
        lock: true, clickBgClose: 'dblclick', 
        escClose: true, 
        autoClose: true, 
        //width: 'auto',
        closeTiming: 15000,
        timing: 15000,
        showTimer: true,
        //lang: 'english',
        maxAble: true, minAble: true, closeAble: true,
        //buttons: $.DialogButtons.OK, 
        //opacity: 0.2,
        showTitle: true,
        callback: function(dialogResult, d, param) {
            console.log(dialogResult, d, param);
            if(dialogResult.OK || dialogResult.Yes) {
                alert('OK');
            } else if(dialogResult.Cancel) {
                alert('Cancel');
            }
        },
        param: {id:123, name:'Tom'}
    });

    //console.log('dialog: ', dialog);
    
    window.setTimeout(function(){
        dialog.resize({
            dir: 'bottom-right',
            x: 40,
            y: 50
        });
    }, 6000);


    window.setTimeout(function(){
        dialog.resize({
            dir: 'center',
            x: 50,
            y: 60
        });
    }, 4000);


    //dialog.setZindex(1000);

    window.setTimeout(function() {
        //dialog.setZindex(2000);
        dialog.append(getCon(16, '大家好'), {height:'auto'});

        dialog.setOptions('topMost', true);
    }, 3000);
}

function confirm2(){
    var html = '<span style="color:#f00;">确定要保存内容吗？</span>'
        //+ '<iframe src="http://122.227.179.90:81"></iframe>'    
        + '<label>内容：</label>'
        + '<input type="text" id="t1" value="abc" />';
        /*
        + '<a href="http://www.baidu.com" target="_blank">baidu</a>'
        + '<div><a href="http://www.163.com">163</a><span onclick="alert(126);">126</span></div>';*/
    var win = $.confirm(html, '保存', {
        buttons: $.DialogButtons.OKCancel,
        //clickBgClose: 'dblclick',
        cancelBubble: true,
        buttonPosition: 'right',
        buttonText: {OK: '提交', Cancel: '算了'},
        position: 9,
        lock: false,
        //maxAble: false,
        topMost: true,
        //showLogo: true,
        fixed: true, 
        titleStyle: {'font-weight':'normal'},
        y: 10,
        x: 15,
        type: 'confirm',
        delayClose: true,
        //redirect: 'http://www.baidu.com',
        //target: 'http://www.baidu.com',
        /*
        success: function(dialogResult) {
            console.log(dialogResult);
            alert('success: ');
        },
        */
        ok: function(dialogResult, d) {
            console.log(dialogResult);
            alert('ok: ');
            if(d.getOptions().delayClose) {
                alert('延迟关闭，在外部回调函数中执行完业务逻辑后，再由外部函数关闭窗口');
            }
        },
        cancel: function(dialogResult, d) {
            console.log(dialogResult);
            alert('cancel:' );
        },
        callback: function(dialogResult, d) {
            console.log(dialogResult);
            if(dialogResult.OK || dialogResult.Yes) {
                alert('点击了确定按钮');
            } else if(dialogResult.None) {
                alert('点击了关闭按钮');
            } else {
                alert('点击了取消按钮');
            }
        }
    });

    window.setTimeout(function(){
        //win.showBottom(true, 'alert').setOptions('showClose',false).showTitle(true, true);
    }, 6000);

    console.log(win.buttons);
}

function win(){
    var win = $.dialog.win({
        //content:'这是普通窗口模式',
        type: 'win',
        position: 5,
        width: 'auto',
        content: 'http://122.227.179.90:81<br />hello world<br />您好<br />大家好啊',
        //bodyStyle: {border: 'solid 1px #eee;', 'border-radius':'4px;'},
        //bodyStyle: {border: 'solid 1px #00f;'},
        titleStyle: {color: '#f00'},
        contentStyle: {color: '#00f'}
    });
    window.setTimeout(function(){
        win.showBottom();
    }, 4000);

    window.setTimeout(function(){
        win.showBottom(false);
    }, 6000);

    window.setTimeout(function(){
        win.showTitle(false);
    }, 8000);

    window.setTimeout(function(){
        win.showTitle(true);
    }, 10000);
    //$.dialog.closeAll('tooltip').dialog('你好');
}

function form2() {
    var win = $.dialog.form('登录窗口', '登录窗口 <span style="color:#f00;">标题栏文字比较多</span> 隐藏文字显示', {
        //lang: 'Chinese',
        //lang: 'English',
        //status: 'max',
        position: 1,
        x: 5,
        y: 5,
        lock: false,
        fixed: true,
        moveAble: true,
        dragMove: true,
        topMost: true,
        //dialogStyle: {'font-family': '宋体'},
        callback: function(dialogResult, d, param) {
            console.log('form2: ', dialogResult);
            
            if(dialogResult.OK || dialogResult.Yes) {
                console.log('form2: ', '点击了确定按钮');
                //to do something:
                console.log('form2: ', 'to do someing');

                if(d.getOptions().delayClose) {
                    console.log('form2: ', '延迟关闭');
                }
                //延时2秒，模拟表单提交任务
                window.setTimeout(function() {
                    console.log('form2: ', '表单内容已提交到后台服务端，关闭登录窗口');
                    d.close();
                }, 2000);

            } else if(dialogResult.None) {
                console.log('form2: ', '点击了关闭按钮');
            } else {
                console.log('form2: ', '点击了取消按钮');
            }
        }
    });

    //getOptoins 为只读
    //win.getOptions().showClose = false;
    //win.setOptions('showClose', false);

    win.showTitle(true, true);

    console.log('win:', win);
    var i = 0;
    var timer = window.setInterval(function() {
        if(i >= 10) {
            window.clearInterval(timer);
        }
        i++;
        //win.move({x:0, y:-10});

    }, 10);
/*
    window.setTimeout(function() {
        win.min();
    }, 2000);

    window.setTimeout(function() {
        win.max();
    }, 4000);

    window.setTimeout(function() {
        win.restore();
        win.moveTo({target: $I('txtTips')});
    }, 6000);
    */
}

function percent() {
    var win = $.dialog.form('百分比尺寸的窗口', '登录窗口 <span style="color:#f00;">标题栏文字比较多</span> 隐藏文字显示', {
        //lang: 'Chinese',
        //lang: 'English',
        //status: 'max',
        position: 5,
        x: 5,
        y: 5,
        width: '50%',
        height: '80%',
        lock: false,
        fixed: true,
        moveAble: true,
        dragMove: true,
        topMost: true,
        //dialogStyle: {'font-family': '宋体'},
        callback: function(dialogResult, d, param) {
            console.log('form2: ', dialogResult);
        }
    });
}

function load(){
    //var url = 'pagination.html';
    //var url = 'http://122.227.179.90:81';
    var url = 'http://122.227.179.90:81';
    var win = $.dialog.load(url, '加载URL 限制最大最小值', {
        maxWidth:800, maxHeight:500,
        width:600, height:360,
        minWidth: 300, minHeight: 150
    });
}

function load2(id){
    var elem = document.getElementById(id);
    var win = $.dialog.load(elem, {maxWidth:800, maxHeight:500});
}

function msg(){
    var win = $.dialog.msg('msg: 这是普通窗口模式。', {
        id: 'msg', autoClose: false, closeTiming: 15000, fixed: true, 
        position: 8, lock: false, clickBgClose: true, y: 0, x: 0,
        target: $I('txtTips'),
        dragSize: false,
        callback: function() {
            console.log('msg close');
        }
    });
    console.log(win.getOptions());
    window.setTimeout(function() {
        //win.update('请注意：提示信息改变了。请注意：提示信息改变了', {width:'auto'});
        win.update('请注意：提示信息改变了。请注意：提示信息改变了', '', 'autosize');
    }, 3000);
}

function tips(){
    var win = $.tips('tips: 提示信息' + new Date().getTime(), $I('txtTips'), {type:'tips',position: 8});

    tips2();

    window.setTimeout(function() {
        var html = 'tips: 请注意：提示信息已经更新。<br />大家好<br />好啊<br />'
            + '<img src="http://122.227.179.90:81/skin/default/images/home/welcome.jpg" />';
        win.update(html, {
            position: 6,
            //tooltipStyle: {'background': '#ffffff'}
        })
    },3000);
    
    window.setTimeout(function() {
        win.update('tips: 请注意：提示信息已经再次更新。', {position:2})
    },5000);

    window.setTimeout(function() {
        win.update('tips: 请注意：提示信息更新。', {position:4})
    },8000);

    window.setTimeout(function() {
        //win.close();
    }, 5000);
    
}

function tips2(){
    var win = $.tips('tips: 提示信息2', {position: 3});
    window.setTimeout(function() {
        //$.tooltip.closeAll();
    }, 6000);
}

function update() {
    var str = '';
    for(var i=0; i<35; i++){
        str += (i + 1) + '. 内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了<br />';
    }
    var dialog = $.alert('Hello!对话框<br />' + str, {id:2, lock: false, escClose: true, autoClose: false});

    //dialog.setZindex(1005);

    dialog.setOptions('topMost', true);

    update2();
}

function getCon(rows, txt) {
    var str = '';
    for(var i=0; i<rows; i++){
        str += (i + 1) + (txt || '. 内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了内容更改了') + '<br />';
    }
    return str;
}


function update2() {
    var str = getCon(3);
    var dialog = $.dialog('Hello!对话框22<br />' + str, {
        id:12, lock: false, minAble: true, maxAble: true, escClose: true, autoClose: false
    });

    dialog.setOptions('topMost', true);

    window.setTimeout(function(){
        dialog.update(getCon(5), '第1次改变','autoheight');
    }, 5000);

    window.setTimeout(function(){
        dialog.update(getCon(2), {width:'auto', height:'auto'});
    }, 8000);

    window.setTimeout(function(){
        dialog.update(getCon(7), '第2次改变');
    }, 10000);

    window.setTimeout(function(){
        dialog.update(getCon(12), '', 'autosize');
    }, 10000);

    window.setTimeout(function(){
        dialog.update(getCon(15), '', '');
    }, 10000);
}


$.setAttribute($I('txt1'), {
    tree: {id:1, pid:0, level:0}, list: [1,2,3], arr:[{id:1},{id:2}], name: 'txt',
    obj: $I('txt2')
}, true, true);

var txt1 = $I('txt1');
txt1.style.cssText += 'background:#f00;';

var tree = $I('txt1').getAttribute('tree');
console.log(tree, typeof tree, typeof $.toJson(tree), $.toJson(tree).id);

console.log($.Pagination);

function paging(){
    var node = $.loadJsScript('../oui/pagination/oui.pagination.min.js', function(){
        console.log('分页');
        var p1 = new OUI.Pagination({
            parent: $('#p1')[0],
            dataCount: 11912,
            markCount: 10,
            pageIndex: 1,
            pageStart: 1,
            pageSize: 12,
            showPageInput: true,
            showPageJump: true,
            showList: true,
            //skin: 'red',
            markType: 'chinese',
            //url: '?pageIndex={0}&type=2&pid=32',
            //sizeOptions: [10, 20, 30],
            callback: function(pageIndex, param){
                console.log('p1-callback: ', pageIndex, ', param: ', param);

                p1.paging(pageIndex);
            },
            useKeyEvent: true,
            inputWidth: 55,
            callbackParam: {
                id: 123, prompt: '这是回调参数'
            }
        });
    });

    console.log('node: ', node.id, node);
}

function showTable(){
    var node = $.loadJsScript('../oui/table/oui.table.js', function(){

        var headData = [
            {
                rowData:{
                    style:{background:'#005eac'}
                }, cellData: ['表头11', '表头12', '表头13', '表头14', '表头15', '表头16']
            },
            {
                rowData:{
                    style:{background:'#005eac'}
                }, cellData: ['表头21', '表头22', '表头23', '表头24', '表头25', '表头26']
            },
            ['表头31', '表头33', '表头33', '表头34', '表头35', '表头36']
        ];
        var bodyData = [
            {
                rowData:{ attribute:{ id:1, class:'tr-1'}, event:{click:function(){alert(this.id);}}}, treeData:{id:1, pid:0}, cellData:[
                    {content:'单元格11', style:{color:'#f00'}}, {content:'单元格12'}, {content:'单元格13'}, {content:'单元格14'}, {content:'单元格15'}, {content:'单元格16'}
                ]
            },
            {
                rowData: {}, treeData:{id:2, pid:1}, cellData:[
                    {content:'单元格21', style:'color:#00f;'}, {content:'单元格22'}, {content:'单元格23'}, {content:'单元格24'}, {content:'单元格25'}, {content:'单元格26'}
                ]
            },
            {
                rowData: {}, treeData:{id:4, pid:2}, cellData:[
                    {content:'单元格41'}, {content:'单元格42'}, {content:'单元格43'}, {content:'单元格44'}, {content:'单元格45'}, {content:'单元格46'}
                ]
            },
            {
                rowData: {}, treeData:{id:3, pid:1}, cellData:[
                    {content:'单元格31'}, {content:'单元格32'}, {content:'单元格33'}, {content:'单元格34'}, {content:'单元格35'}, {content:'单元格36'}
                ]
            },
            {
                rowData: {}, treeData:{id:5, pid:2}, cellData:[
                    {content:'单元格51'}, {content:'单元格52'}, {content:'单元格53'}, {content:'单元格54'}, {content:'单元格55'}, {content:'单元格56'}
                ]
            },
            {
                rowData: {}, treeData:{id:6, pid:4}, cellData:[
                    {content:'单元格61'}, {content:'单元格62'}, {content:'单元格63'}, {content:'单元格64'}, {content:'单元格65'}, {content:'单元格66'}
                ]
            },
            {
                rowData: {}, treeData:{id:7, pid:2}, cellData:[
                    {content:'单元格71'}, {content:'单元格72'}, {content:'单元格73'}, {content:'单元格74'}, {content:'单元格75'}, {content:'单元格76'}
                ]
            },
            {
                rowData: {}, treeData:{id:8, pid:2}, cellData:[
                    {content:'单元格81'}, {content:'单元格82'}, {content:'单元格83'}, {content:'单元格84'}, {content:'单元格85'}, {content:'单元格86'}
                ]
            },
            {
                rowData: {}, treeData:{id:9, pid:3}, cellData:[
                    {content:'单元格91'}, {content:'单元格92'}, {content:'单元格93'}, {content:'单元格94'}, {content:'单元格95'}, {content:'单元格96'}
                ]
            }
        ];

        var tb = new $.Table({
            table: 'tblist',                //表格（对象 或 Id 或 null)，为null则自动创建表格对象（可以不设置）
            className: 'tblist',
            parent: document.getElementById('t1'),          //表格父节点，默认为 document.body （可以不设置）
            headData: headData,             //初始化时要创建的表格头部数据（可以不设置），数据格式参考示例说明
            bodyData: bodyData,                 //初始化时要创建的表格主体数据（可以不设置），数据格式参考示例说明
            showTree: true,                 //是否显示树形结构，boolean值： true | false, 默认为false（可以不设置）
            treeCellIndex: 0,               //要显示树形结构的列索引，从0开始，默认为0（可以不设置）
            trigger: {                      //树形收缩/展开触发器，若cell和row同时设置了不同的事件，可能会有事件冒泡
                cell: ['click', 'toggle'],  //点击列触发事件，数组或字符串，第1个元素为事件：(click, dblclick)，第2个元素为动作： (toggle, expand, collapse)
                //row: 'click'                //点击行触发事件，数组或字符串，第1个元素为事件：(click, dblclick)，第2个元素为动作： (toggle, expand, collapse)
            },
            treeOptions:{                   //树形结构参数
                spaceWidth: 16,             //树形每一层之间的缩进距离，单位为px，默认为16px（可以不设置）
                /*className: {                //树形结构箭头图标样式
                    expand: 'expand',       //节点展开时的样式
                    collapse: 'collapse'    //节点收缩时的样式
                },
                */
                //className: ['expand', 'collapse'] //可以数组形式，第1个元素为节点展开的样式
            } 
        });
    });

    console.log('node: ', node.id, node.src, node.getAttribute('src'), node);
}

</script>