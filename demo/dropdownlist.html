<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>下拉菜单（多选）</title>
	<style type="text/css">
		
		body {font-size: 14px;}
		select {min-width:400px;height:32px;border:solid 1px #ccc; border-radius:5px;padding:0 5px;margin:0px;}
		input {outline:none;padding:0 5px; border-radius:5px;min-width:400px;border:solid 1px #ccc;}
		table {}
		table td {padding:0 10px 10px 0;}
		
	</style>
	<script type="text/javascript" src="../oui/oui.js"></script>
	<script type="text/javascript" src="../oui/dropdownlist/oui.dropdownlist.js"></script>
</head>
<body style="background: #eee;">
<select id="Origin" class="form-control select" data-type="int">
    <option value="">未设置</option>
    <option value="-1">是否启用</option>
    <option value="1">启用</option>
    <option value="0">禁用</option>
</select>
<select id="Enable" class="form-control select" data-type="int">
    <option value="">未设置</option>
    <option value="-1">是否启用</option>
    <option value="1">启用</option>
    <option value="0">禁用</option>
</select>
<br />
<br />
<table cellpadding="0" cellspacing="0">
	<tr>
		<td colspan="3"><select id="DeviceType" style="width:1000px;" data-type="int"></select></td>
	</tr>
	<tr>
		<td><select id="DeviceType1" data-type="int"></select>
		</td>
		<td><select id="ServerType" style="" onchange="print1(this);">
			<option value="">请选择服务类型</option>
		</select></td>
		<td><select id="tree1" style=""></select></td>
	</tr>
	<tr>
		<td><select id="ServerType1" style="" onchange="print1(this);"></select></td>
		<td><input type="text" id="ServerType2" style="" /></td>
		<td><select id="tree2" style=""></select></td>
	</tr>
</table>
<br />
<br />
<div style="height:500px;"></div>
<table cellpadding="0" cellspacing="0">
	<tr>
		<td colspan="3">Grid布局 每行3列</td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType20" style="width:300px;" /></td>
		<td><input type="text" id="ServerType21" style="width:300px;" /></td>
		<td><input type="text" id="ServerType22" style="width:300px;" /></td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType23" style="width:300px;" /></td>
		<td><input type="text" id="ServerType24" style="width:300px;" /></td>
		<td><input type="text" id="ServerType25" style="width:300px;" /></td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType26" style="width:300px;" /></td>
		<td><input type="text" id="ServerType27" style="width:300px;" /></td>
		<td><input type="text" id="ServerType28" style="width:300px;" /></td>
	</tr>
	<tr>
		<td colspan="3">不同的列数布局和不同的按钮数量</td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType30" style="width:300px;" /></td>
		<td><input type="text" id="ServerType31" style="width:300px;" /></td>
		<td><input type="text" id="ServerType32" style="width:300px;" /></td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType33" style="width:300px;" /></td>
		<td><input type="text" id="ServerType34" style="width:300px;" /></td>
		<td><input type="text" id="ServerType35" style="width:300px;" /></td>
	</tr>
	<tr>
		<td><input type="text" id="ServerType36" style="width:300px;" /></td>
		<td><input type="text" id="ServerType37" style="width:300px;" /></td>
		<td><input type="text" id="ServerType38" style="width:300px;" /></td>
	</tr>
</table>
<br />
<br />
<table cellpadding="0" cellspacing="0">
	<tr>
		<td>不可编辑<br /><input type="text" id="ServerType50" style="" /></td>
		<td>可编辑但默认不显示（shift + A.5）<br /><select id="ServerType51" style=""></select></td>
		<td>可编辑<br /><select id="ServerType52" style=""></select></td>
		<td>可编辑(并保留输入)<br /><select id="ServerType53" style=""></select></td>
	</tr>
	<tr>		
		<td>多选（不可编辑）<br /><input type="text" id="ServerType4" style="" /></td>
		<td>
			单选<br />
			<select id="origin1" size="3">
				<option value="-1">推送图片类型</option>
	            <option value="0">都推送</option>
	            <option value="1" selected="selected">仅推送抓拍图</option>
	            <option value="2">仅推送报警图</option>
	            <option value="3">都不推送</option>
			</select>
	</td>
	</tr>
</table>
<div style="height:500px;"></div>
</body>
</html>
<script type="text/javascript" src="dropdownlist.json"></script>
<script type="text/javascript">
window.onload = function() {

	$.singlelist('Enable', {
		debounce: true,
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
		}
	});

	var types = [
		{ id: 1, name: '视频设备', desc: '400万像素高清摄像机' },
		{ id: 2, name: 'DTU设备', desc: '' },
		{ id: 3, name: 'LED设备', desc: 'LED显示屏' },
		{ id: 4, name: '传感器设备', desc: '传感器设备', single: true },
		{ id: 5, name: '激光测距设备', desc: '', single: true },
		{ id: 6, name: '智能安全带', desc: '', single: true },
		{ id: 7, name: '北斗定位', desc: '', single: true },
		{ id: 8, name: '雷达测距设备', desc: '', disabled: false },
	];
	var k = 'DeviceType';
	$.dropdownlist({
		id: k,
		items: types,
		//single: true,
		// 是否多选，默认就是多选，所以这个参数可以不用加
		multi: true,
		// 是否启用混合模式，默认是不启用的，这个属于特殊应用场景
		mixed: true,
		//
		value: '2,3',
		layout: 'list',
		boxWidth: 'follow',
		itemBorder: true,
		//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
		//submit: 0,
        callbackLevel: 0,
       
		title: '选择设备类型',
		//是否显示“确定”按钮，复选框模式时默认为显示，如果不想显示，需要指定为false
		button: false,
		//是否显示值内容
		display: true,
		//number:true,
		//是否显示选择框，默认：复选显示，单选不显示
		//choose: true,
		//按钮位置： left,center,right
		//buttonPosition: 'right',
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
		}
	});

	var types = [
		{ id: 1, name: '视频设备', desc: '400万像素高清摄像机' },
		{ id: 2, name: 'DTU设备', desc: '' },
		{ id: 3, name: 'LED设备', desc: 'LED显示屏' },
		{ id: 4, name: '传感器设备', desc: '传感器设备' },
		{ id: 5, name: '激光测距设备', desc: ''},
		{ id: 6, name: '智能安全带', desc: '' },
		{ id: 7, name: '北斗定位', desc: '' },
		{ id: 8, name: '雷达测距设备', desc: '', disabled: false },
	];
	var k = 'DeviceType1';
	$.dropdownlist({
		id: k,
		items: types,
		//single: true,
		value: '2,3',
		//single:true,
		layout: 'list',
		boxWidth: 'follow',
		itemBorder: true,
		//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
		//submit: 0,
        callbackLevel: 0,
       
		title: '选择设备类型',
		//强制显示“确定”按钮
		button: true,
		//是否显示值内容
		display: true,
		//number:true,
		//是否显示选择框，默认：复选显示，单选不显示
		//choose: true,
		//按钮位置： left,center,right
		buttonPosition: 'right',
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
			getDeviceList();
		}
	});

	$.dropdownlist({
		id: 'ServerType',
		element: 'ServerType',
		items: [
			{ id: 1, name: 'WEB服务', desc: '' },
			{ id: 2, name: '设备服务', desc: '' },
			{ id: 3, name: '图片推送服务', desc: '', disabled: true },
			{ id: 4, name: '视频设备视频设备视频设备视频设备视频设备', desc: '' },
			{ id: 5, name: '图片采集服务', desc: '' },
			{ id: 6, name: '平台级联服务', desc: '' },
			{ id: 7, name: '平台级联服务7', desc: '' },
			{ id: 8, name: '平台级联服务8', desc: '' },
			{ id: 9, name: '平台级联服务9', desc: '' },
			{ id: 10, name: '平台级联服务10', desc: '' },
			{ id: 11, name: '平台级联服务11', desc: '' },
			{ id: 12, name: '平台级联服务12', desc: '' },
			{ id: 13, name: '平台级联服务13', desc: '' },
			{ id: 14, name: '平台级联服务14', desc: '' },
			{ id: 15, name: '平台级联服务15', desc: '' },
		],
		//select: false,
		layout: 'list',
		single: true,
		display: true,
		number: true,
		change: true,
		origin: true,
		search: true,
		//value: '5',
		//index: 2,
		boxWidth: 400,
		//boxWidth: 'follow',
		//textWidth: 200,
		//itemWidth: '48%',
		itemBorder: true,
		//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
		//submit: 0,
        //callbackLevel: 0,
       
		title: '选择服务类型',
		//按钮位置： left,center,right
		buttonPosition: 'right',
		complete: function (value, initial, ddl) {
			$.console.log(ddl.id, '[complete]', ', values:', value, ', initial:', initial, ddl);
		},
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
			getDeviceList();
		}
	});

	$I('ServerType').val = 2;
	
	window.setTimeout(function() {
		$.singlelist.update('ServerType111', {
			items: [
				{ id: 11, name: 'WEB服务', desc: '' },
				{ id: 12, name: '设备服务', desc: '' },
				{ id: 13, name: '图片推送服务', desc: '', disabled: true },
				{ id: 14, name: '视频服务', desc: '' },
				{ id: 15, name: '图片采集服务2', desc: '' },
				{ id: 16, name: '平台级联服务', desc: '' },
				{ id: 17, name: '流媒体', desc: '' },
			],
			value: 16,
			append: true,
			//更新模式下，以下参数不起作用
			/*
			select: false,
			layout: 'list',
			single: true,
			display: true,
			number: true,
			callback: function (value, initial, data, ddl) {
				$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
				getDeviceList();
			}
			*/
			
		});
	}, 5000);
	
	
	$.dropdownlist({
		id: 'ServerType1',
		items: [
			{ id: 1, name: 'WEB服务', desc: '' },
			{ id: 2, name: '设备服务', desc: '' },
			{ id: 3, name: '图片推送服务', desc: '' },
			{ id: 4, name: '视频服务', desc: '' },
			{ id: 5, name: '图片采集服务', desc: '' },
			{ id: 6, name: '平台级联服务', desc: '' },
		],
		layout: 'list',
		boxWidth: 'follow',
		single: true,
		//textWidth: 200,
		itemBorder: true,
		number:true,
		display: true,
		//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
		//submit: 0,
        //callbackLevel: 0,
        
		title: '选择服务类型',
		//按钮位置： left,center,right
		buttonPosition: 'right',
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
			getDeviceList();
		}
	});


	window.setTimeout(function() {
		$.singlelist.update('ServerType1', {
			items: [
				{ id: 11, name: 'WEB服务', desc: '' },
				{ id: 12, name: '设备服务', desc: '' },
				{ id: 13, name: '图片推送服务', desc: '', disabled: true },
				{ id: 14, name: '视频服务', desc: '' },
				{ id: 15, name: '图片采集服务2', desc: '' },
				{ id: 16, name: '平台级联服务', desc: '' },
				{ id: 17, name: '流媒体', desc: '' },
			],
			value: 15,
			append: false
		});
	}, 5000);

	//window.setTimeout(function() { $I('ServerType1').val = 3; }, 2000);
	//$I('ServerType1').val = 3;


	$.dropdownlist({
		id: 'ServerType2',
		items: [
			{ id: 1, name: 'WEB服务WEB服务', desc: '' },
			{ id: 2, name: '设备服务', desc: '' },
			{ id: 3, name: '图片推送服务', desc: '', checked: true },
			{ id: 4, name: '视频服务', desc: '' },
			{ id: 5, name: '图片采集服务', desc: '' },
			{ id: 6, name: '平台级联服务', desc: '' },
		],
		layout: 'grid',
		//boxWidth: 400,
		boxWidth: 'follow',
		//textWidth: 200,
		itemWidth: 'cell',
		columns: 2,
		itemBorder: true,
		//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
		//submit: 0,
        //callbackLevel: 0,
        
        //是否单选，默认多选
        multi: true,
		title: '选择服务类型',
		//按钮位置： left,center,right
		buttonPosition: 'right',
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
			getDeviceList();
		}
	});

	var items = [
		{ id: 1, code: 'web', name: 'WEB服务', desc: '' },
		{ id: 2, code: 'device', name: '设备服务', desc: '' },
		{ id: 3, code: 'pic', name: '图片推送服务', desc: '' },
		{ id: 4, code: 'video', name: '视频服务', desc: '高清' },
		{ id: 5, code: 'capture', name: '图片采集服务', desc: '' },
		{ id: 6, code: 'linkage', name: '平台级联服务', desc: '' },
		{ id: 7, code: 'ai', name: '图片分析服务', desc: '' },
		{ id: 8, code: 'alarm', name: '图片报警服务', desc: '' },
		{ id: 9, code: 'measure', name: '雷达扫描测距', desc: '' },
		{ id: 10, code: 'measure1', name: '雷达扫描测距1', desc: '' },
		{ id: 11, code: 'measure2', name: '雷达扫描测距2', desc: '' },
		{ id: 12, code: 'measure3', name: '雷达扫描测距3', desc: '' },
		{ id: 13, code: 'measure4', name: '雷达扫描测距4', desc: '' },
		{ id: 14, code: 'measure5', name: '雷达扫描测距5', desc: '' },
	], len = 9;

	for (var i = 0; i < len; i++) {
		var id = 'ServerType2' + i,
			opts = [].concat(items);

		$.dropdownlist({
			id: id,
			element: id,
			items: opts,
			layout: 'grid',
			boxWidth: i >= len / 2 ? 'follow' : '',
			//textWidth: 200,
			//itemWidth: i > 5 ? 'auto' : 'cell',
			//itemWidth: 'cell',
			columns: 3,
			//boxWidth: 400,
			itemBorder: true,
			//回调等级：0-选项实时回调，1-全选/反选等按钮事件回调，2-确定按钮事件回调
			//submit: 0,
	        //callbackLevel: 0,
	        
	        //是否单选，默认多选
	        multi: true,
	        //是否支持按钮快捷键（默认支持）
	        shortcutKey: true,
	        //是否显示快捷键数字（默认不显示）
	        shortcutNum: true,
			title: '选择服务类型',
			//按钮位置： left,center,right
			buttonPosition: 'right',
			button: i >= 4,
			buttonLimit: i === 1 || i === 4 || i === 7 ? 3 : i === 2 || i === 5 || i === 8 ? 1 : -1,
			callbackLevel: i >= 3 ? 0 : 1,
			callback: function (value, initial, data, ddl) {
				$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
				getDeviceList();
			}
		});
	}

	for (var i = 0; i < len; i++) {
		var id = 'ServerType3' + i,
			opts = [].concat(items);
		if (i > 7) {
			opts.length = 5;
		}
		$.dropdownlist({
			id: id,
			element: id,
			items: opts,
			//layout: 'list',
			layout: 'grid',
			boxWidth: i >= len / 2 ? 'follow' : '',
			columns: i >= len / 2 ? 0 : 3,
			//editable: true,
	        //single: true,
			itemBorder: true,
	        //是否支持按钮快捷键（默认支持）
	        shortcutKey: true,
	        //是否显示快捷键数字（默认不显示）
	        shortcutNum: true,
			title: '选择服务类型',
			//按钮位置： left,center,right
			buttonPosition: 'right',
			button: i === 4,
			buttonLimit: i === 1 || i === 4 || i === 7 || i === 6 ? 3 : i === 2 || i === 5 || i === 8 ? 1 : -1,
			callbackLevel: i >= 3 && i <= 5 ? 0 : i === 7 ? 2 : 1,
			callback: function (value, initial, data, ddl) {
				$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
				getDeviceList();
			}
		});
	}

	$I('ServerType30').val = '3,5,6';

	$.dropdownlist({
		id: 'ServerType4',
		element: 'ServerType4',
		items: [
			1,[2,'视频服务'],3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33
		],
		boxWidth: 'follow',
		//maxHeight: 500,
		itemWidth: '48%',
		//maxHeight: 70,
		//maxHeight: 'auto',
		itemBorder: true,
        //callbackLevel: 0,
        //是否单选，默认多选
        multi: true,
        //显示的列表行数设置为10行，默认为显示12行
        lines: 10,
        //是否支持按钮快捷键（默认支持）
        shortcutKey: true,
        //是否显示快捷键数字（默认不显示）
        //shortcutNum: true,
		title: '选择服务类型',
		//按钮位置： left,center,right
		buttonPosition: 'right',
		callback: function (value, initial, data, ddl) {
			$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
			getDeviceList();
		}
	});

	var numitems = [
		1,[2,'Vi'],3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33
	];

	for (var i = 0; i < 4; i++) {
		$.dropdownlist({
			id: 'ServerType5' + i,
			items: i === 3 ? [0].concat(numitems) : numitems,
			dataType: 'int',
			boxWidth: 'follow',
			//itemWidth: '33%',
			itemWidth: 'cell',
			columns: 4,
			textHeight: 34,
			textAlign: 'center',
			//maxHeight: 70,
			//maxHeight: 'auto',
			itemBorder: true,
			single: true,
			//select: false,
			layout: 'grid',
	        //callbackLevel: 0,
	        
	        //是否单选，默认多选
	        multi: true,
	        //是否支持按钮快捷键（默认支持）
	        shortcutKey: true,
	        //是否显示快捷键数字（默认不显示）
	        //shortcutNum: true,
			title: '选择服务类型',
			//按钮位置： left,center,right
			buttonPosition: 'right',
			callback: function (value, initial, data, ddl) {
				$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
				getDeviceList();
			},
			editable: i > 0,
			config: {
				maxlength: 8,
				datatype: 'int',
				minus: true,
				decimalLen: 2,
				show: i > 1,
				min: 5,
				max:1000,
				keep: i === 3
			}
		});
	}
	
	$.dropdownlist({
			id: 'origin1',
			element: 'origin1',
			items: [],
			origin: true,
			boxWidth: 'follow',
			itemWidth: '48%',
			//maxHeight: 70,
			//maxHeight: 'auto',
			itemBorder: true,
			single: true,
	        //callbackLevel: 0,
	        
	        //是否单选，默认多选
	        multi: true,
	        //是否支持按钮快捷键（默认支持）
	        shortcutKey: true,
	        //是否显示快捷键数字（默认不显示）
	        //shortcutNum: true,
			title: '',
			//按钮位置： left,center,right
			buttonPosition: 'right',
			callback: function (value, initial, data, ddl) {
				$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
				getDeviceList();
			}
		});
};

function getDeviceList() {

}

function print1(ddl) {
	$.console.log('changed:', ddl.id, ddl.value);
}

$.dropdownlist('tree2', {
	tree: true,
	width: 400,
	dataType: 'int',
	number: true,
	desc: true,	
	search: true,
	clearSearch: true,
	callback: function (value, initial, data, ddl) {
		$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
	},
	items: [
		
		{id: 1, name: '节点1', type: 'unit'},
		{pid: 1,name:'节点1的子节点', disabled: true},
		{id: 2, name: '节点2', type: 'unit', pid: 1},
		{id: 3, name: '节点3', type: 'unit', pid: 1},
		{id: 4, name: '节点4', type: 'unit', pid: 1},
		{id: 5, name: '节点5', type: 'unit', disabled: true},
		{id: 6, name: '节点6', type: 'unit', pid: 3},
		{id: 7, name: '节点7', type: 'unit', use: false },
		{id: 8, name: '节点8', type: 'unit'},
		{id: 9, name: '节点9', type: 'unit', pid: 6},
		{id: 10, name: '节点10', type: 'unit', pid: 4},

		{id: 1, name:'设备1', type: 'device', ptype: 'unit', pid: 2},
		{id: 2, name:'设备2', type: 'device', ptype: 'unit', pid: 2},
		{id: 3, name:'设备3', type: 'device', ptype: 'unit', pid: 2},
		{id: 4, name:'设备4', type: 'device', ptype: 'unit', pid: 6},
		{id: 5, name:'设备5', type: 'device', ptype: 'unit', pid: 6},
		{id: 6, name:'设备6', type: 'device', ptype: 'unit', pid: 9},
		{id: 7, name:'设备7', type: 'device', ptype: 'unit', pid: 9},

		{id: 1, name:'通道1', type: 'camera', ptype: 'device', pid: 2},
		{id: 2, name:'通道2', type: 'camera', ptype: 'device', pid: 2},
		{id: 3, name:'通道3', type: 'camera', ptype: 'device', pid: 4},
		{id: 4, name:'通道4', type: 'camera', ptype: 'device', pid: 4},
		{id: 5, name:'通道5', type: 'camera', ptype: 'device', pid: 4},
		{id: 6, name:'通道6', type: 'camera', ptype: 'device', pid: 3},
		{id: 7, name:'通道7', type: 'camera', ptype: 'device', pid: 3}

	]
});

$.console.log('tree1:', new Date().format('yyyyMMddHHmmss.fff'));
$.dropdownlist('tree1', {
	tree: true,
	width: 500,
	single: true,
	//显示序号
	number: true,
	//显示Value值，格式 Value - Text
	//display: true,
	dataType: 'int',
	//将Id/Value值作为desc显示
	desc: true,
	search: true,
	searchFields: ['name', 'code'],
	clearSearch: false,
	//是否防抖回调，默认是防抖的，所以默认不用设置此参数，若不需要防抖，则需要设置为 false
	//debounce: true,
	//callbackDebounce: false,
	callback: function (value, initial, data, ddl) {
		$.console.log(ddl.id, '[callback]', ', value:', value, ', initial:', initial, ', data:', data);
	},
	complete: function() {
		$.console.log('tree1:', new Date().format('yyyyMMddHHmmss.fff'));
	},
	items: treedata.units
});

</script>