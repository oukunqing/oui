<!DOCTYPE html>
<html>
<head>
    <title>表单输入内容限制示例</title>
<style type="text/css">
body {font-size:14px;}
input {width:400px; height: 28px; font-size:14px; border:solid 1px #000; margin:0; padding: 0 5px; border-radius:3px;}
/*input:focus{border:solid 1px #00f;}*/
select{width:412px; height:30px;border:solid 1px #000;margin:0; padding: 0 5px;border-radius:3px;}
/*select:focus{border:solid 1px #00f;}*/
button {width:120px;height:28px;}
</style>
</head>
<body>
    <div style="margin:0px 0 0;float:left;">
        <table cellpadding="5">
            <tr>
                <td></td>
                <td><input type="text" id="fmt_test" placeholder="不限制" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_15" placeholder="只能输入数字（长度15个字节）" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_max_15" placeholder="只能输入数字（最大长度15个字节）" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_max" placeholder="只能输入整数(100-240)" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_float_max" placeholder="只能输入小数或整数(5-360)" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_hex" placeholder="只能输入十六进制字符" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_num_hex1" placeholder="只能输入十六进制字符" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt-num-angle" placeholder="只能输入角度值（小数或整数，0-360），保留2位小数" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_int" placeholder="只能输入整数（可以负数）" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_float" placeholder="只能输入小数（或整数）可以负数" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_float1" placeholder="只能输入小数(保留2位小数)（或整数）" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_word" placeholder="只能输入英文字母、数字、下划线" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_word2" placeholder="只能输入英文字母、数字、下划线以及连接符，最大30个字符" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_char" placeholder="只能输入英文字母" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_char_num" placeholder="只能输入英文字母和数字" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_bool" placeholder="只能输入布尔值 0 或 1" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_ipv4" placeholder="只能输入IPv4地址" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_ipv6" placeholder="只能输入IPv6地址" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_port" placeholder="只能输入端口号" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_option" placeholder="" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_option1" options="abc:abc123,acc,asd" placeholder="选择或输入" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_option2" placeholder="只能选择不能输入" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_channel" placeholder="" /></td>
            </tr>
            <tr>
                <td></td>
                <td><input type="text" id="fmt_channel2" placeholder="" /></td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <select id="select1" onchange="console.log('select change:', this.value);">
                        <option value="10001">第1项</option>
                        <option value="10002">第2项</option>
                        <option value="10003">第3项</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td></td>
                <td>
                    <select id="select2" onchange="console.log('select change:', this.value);">
                        <option value="10001">第1项</option>
                        <option value="10002">第2项</option>
                        <option value="10003">第3项</option>
                    </select>
                </td>
            </tr>
        </table>
    </div>
    <div style="float:right;text-align:left;">
        <button onclick="showForm();">弹出层表单</button>
    </div>
    <div style="margin:300px 0;clear:both;display: block;float:left;">&nbsp; </div>
</body>
</html>
<script type="text/javascript" src="../oui/oui.js?"></script>
<script type="text/javascript" src="../oui/form/oui.form.js?"></script>
<script type="text/javascript" src="../oui/dialog/oui.dialog.js?12"></script>
<script type="text/javascript">
    //没有引用jquery.js
    window.onload = function() {
        
        $.addKeyListener(document, 'keyup',  function(e, n) {
            console.log('keyup:', e.keyCode, n, e);
        }, false);
        
        /*
        $.addKeyListener(document, 'keydown',  function(e, n) {
            //console.log('keydown:', e.keyCode, n, e);
        }, false);
        */
        
        $.setInputFormat('txtMobile', {
            types: ['number'],
            minus: false,
            //shift: false
        });
        $.setInputFormat('txtPort', {
            types: ['number'],
            minVal: 80,
            maxVal: 65535
        });

        $.setInputFormat('fmt_num_15', {
            types: ['number'],
            //内容长度固定为15个字节
            valLen: 15
        });

        $.setInputFormat('fmt_num_max', {
            types: ['int'],
            minVal: 100,
            maxVal: 240
        });

        $.setInputFormat('fmt_num_float_max', {
            types: ['float'],
            minVal: 5,
            maxVal: 360
        });

        $.setInputFormat('fmt_num_hex', {
            types: ['hex', 'option'],
            options: ['a55a', '5aa5'],
            //type: 'hex',
            maxLen: 4
        });
        $.setInputFormat('fmt_num_hex1', {
            type: 'hex',
            space: true
        });

        $.setInputFormat('fmt-num-angle', {
            //types: ['angle'],
            types: 'angle',
            maxVal: 360,
            //dot: false
            decimalLen: 2
        });

        $.setInputFormat('fmt_num_max_15', {
            types: ['number'],
            maxLen: 15
        });

        $.setInputFormat('fmt_int', {
            types: ['int'],
            minus: true
        });

        $.setInputFormat('fmt_float', {
            types: ['float'],
            minus: true
        });
        $.setInputFormat('fmt_float1', {
            types: ['float'],
            decimalLen: 2
        });
        $.setInputFormat('fmt_word', {
            types: ['word'],
            shift: true
        });
        $.setInputFormat('fmt_word2', {
            types: ['word'],
            shift: true,
            pattern: /^[\w-]{0,}$/i,
            maxLen: 30
        });
        $.setInputFormat('fmt_char', {
            types: ['char'],
        });
        $.setInputFormat('fmt_char_num', {
            types: ['char_number'],
            minus: false 
            //patterns: [/^[A-Z0-9]{0,}$/i]
        });
        $.setInputFormat('fmt_bool', {
            types: ['bool'],
            options: [{val:1, txt:'启用'},{val:0, txt:'禁用'}],
            value: 0,
            config: { 
                //bool型 默认readonly:true
                readonly: false, 
                display: true 
            }
        });
        $.setInputFormat('fmt_ipv4', {
            types: ['ipv4']
        });
        $.setInputFormat('fmt_ipv6', {
            types: ['ipv6']
        });
        $.setInputFormat('fmt_port', {
            types: ['port']
        });

        $I('fmt_port').val = 1234;

        $.setInputFormat('fmt_option', {
            types: ['option'],
            options: ['abc', 'acc', 'asd', '123', '456', '789'],
            //showOption: false,
            maxLen: 3,
            //config: { editable: true }
        }); 
        $.setInputFormat('fmt_option1', {
            types: ['option', 'char'],
            maxLen: 4,
            //是否允许输入中文，默认不允许，需要限制输入格式的一般都是有特定格式规则的输入
            //chinese: true,
            config: { editable: true }
        }); 
        $.setInputFormat('fmt_option2', {
            types: ['option', 'word'],
            options: ['abc', 'acc', 'asd', '123', {val:456,txt:'456456'}, '输入选项ABC123', 'hello', 'world', 'abcdefg', 'helloworld'],
            //display: 同时显示值value和文本text，如果value===text则只显示text
            config: { 
                number: true, 
                display: true,
                readonly: true,
                //选项框最大显示高度，默认为360px
                //maxHeight: 400
            },
            maxLen: 3,
            //chinese: true
        });
        window.setTimeout(function() {
            $I('fmt_option2').val = 'asd';
        }, 3000);

        $.setInputFormat('fmt_channel', {
            types: ['int', 'option'],
            options: buildOptions([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,100,1000], '通道'),
            config: { readonly: false, title: '请选择通道'  }
        });

        $.setInputFormat('fmt_channel2', {
            types: ['int', 'option'],
            options: buildOptions([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,100,1000], '通道'),
            config: { readonly: true, number: true, display: true }
        });


        $.setInputFormat('select1', {
            types: ['option', 'word'],
            options: ['abc', 'acc', 'asd', '123', {val:456,txt:'456456'}, {val:'ABC123',txt:'输入选项ABC123ABC123'}, 'hello', 'world', 'abcdefg', 'helloworld', 'linux', 'windows'],
            //value: 456,
            //display: 同时显示值value和文本text，如果value===text则只显示text
            config: { 
                name: '选项',
                //是否显示序号（行号），默认不显示
                number: true, 
                //是否显示“值”
                display: true,
                //选项框最大显示高度，默认为360px
                //maxHeight: 400,
                maxWidth: 320
            }
        });
        window.setTimeout(function() {
            $I('select1').val = 'hello';
        }, 3000);

        $.setInputFormat('select2', {
            types: ['option', 'word'],
            options: [{val:456,txt:'456456'}, '123', {val:'ABC123',txt:'选项ABC123'}, 'hello', 'world', 'abcdefg', 'helloworld'],
            value: 'ABC123',
            //display: 同时显示值value和文本text，如果value===text则只显示text
            config: { 
                //是否追加选项，追加选项表示将select控件元素原有的<option>项 + options配置 作为选项参数
                //若 append:false 是不启用原有<option>项的
                append: true,
                //是否显示序号（行号），默认不显示
                number: true, 
                display: true,
                //选项框最大显示高度，默认为360px
                //maxHeight: 400,
                maxWidth: 200,
                width: 240
            }
        });
        $I('select2').val = 123;

        $.console.log($I('select2').val);
    };

    function buildOptions(numbers, name) {
        var options = [];
        for (var i = 0; i < numbers.length; i++) {
            options.push({ val: numbers[i], txt: (numbers[i] ? numbers[i] : '无') + name });
        }
        return options;
    }

    function showForm() {
        if (window.dialogForm123) {
            window.dialogForm123.show();
            return false;
        }
        var html = [
            '<div>',
            '文本框选项：<input type="text" id="txtDialogOpt1" style="width:360px;" />',
            '<br /><br />',
            '下拉框选项：<select id="ddlDialogOpt2" style="width:372px;"></select>',
            '</div>'
        ];
        window.dialogForm123 = $.dialog.win(html.join(''), '相对位置演示', {
            //lock: false,
            height: 400,
            closeType: 'hide'
        });


        $.setInputFormat('txtDialogOpt1', {
            types: ['option', 'word'],
            options: ['abc', 'acc', 'asd', '123', {val:456,txt:'456456'}, '输入选项ABC123', 'hello', 'world', 'abcdefg', 'helloworld'],
            //display: 同时显示值value和文本text，如果value===text则只显示text
            config: { 
                number: true, 
                display: true,
                //readonly: true,
                relative: true,
                //选项框最大显示高度，默认为360px
                maxHeight: 240
            },
            maxLen: 3
        });

        $.setInputFormat('ddlDialogOpt2', {
            types: ['option', 'word'],
            options: [{val:'',txt:'空选项'},'abc', 'acc', 'asd', '123', {val:456,txt:'456456'}, {val:'ABC123',txt:'输入选项ABC123'}, 'hello', 'world', 'abcdefg', 'helloworld'],
            value: 456,
            //display: 同时显示值value和文本text，如果value===text则只显示text
            config: { 
                number: true, 
                display: true,
                relativePosition: true,
                //选项框最大显示高度，默认为360px
                maxHeight: 200
            }
        });
    }

    /*
    //引用jquery.js
    $(document).ready(function(){
        $('#form1,#btnOK').formValidate({
            rules: {
                Id: { dataType: 'int' },
                Name: { required: true },
                Age: { dataType: 'int', required: true }
            }, submit: function (formData) {
                if (formData) {
                    console.log('formData: ', formData);
                    
                }
                return false;
            }
        });
    });
    */

</script>
