
/*
	@Title: OUI
	@Description：JS通用代码库
	@Author: oukunqing
	@License：MIT

	$.gridmap 网格地图
*/

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!9($){\'2p 2q\';k h={1H:$.2r(t),1I:\'1j.11.\'};$.2s(h.1H,\'\',9(){},h.1I);k i={1k:{},1J:9(a){l i.1k[\'1K\'+a]},1L:9(a,b){i.1k[\'1K\'+a]={q:a,C:b,};l 7}};k j={1M:9(a,b){k c={};m($.2t(a)){$.T(c,b,{8:a,q:a.q})}D m($.2u(a,t)){k d=$.1N(a);$.T(c,b,{8:d,q:a})}D{$.T(c,a,b)}m(!c.8){l 2v}k e=i.1J(c.q),C;m(e){C=e.C}D{C=2w 1l(c);i.1L(c.q,C)}l C},1m:9(a){k b=a.8.U;m(b){k c=b.2x,12=b.2y,1O=a.4.1n,1P=a.4.1o;m(c!==1O||12!==1P){a.8.E=c;a.8.F=12;a.4.1n=c;a.4.1o=12;l t}}l V},1Q:9(b){k c=14.1R(\'u\');c.1p=\'1j-11-o\';c.1q=[\'<a W="1r">+</a><a W="1S">-</a>\'].1T(\'\');b.8.U.1U(c);$.M(c,\'2z\',9(e){k a=e.1V,1W=a.2A.2B(),1s=a.1p.2C().2D(\' \')[0];15.16(\'1V:\',a,1W,1s);2E(1s){1X\'1r\':b.o(1,1);1Y;1X\'1S\':b.o(1,-1);1Y}});l 7},1t:9(a,b,c){k d=a,1u=d.G.1v.X,1w=d.G.Y.X,H=d.4.w,z=1u>=1w?1u:1w;m(!$.2F(b)||b<=0){l 7}m(c){H+=c*b;m(H<=0){H=1}D m(H>z){H=z}d.4.w=H}D{d.4.w=b>z?z:b}15.16(d.4.w);l 7},1Z:9(a,b){k c=a.G,1x=b?c.Y:c.1v,z=1x.X,17=a.4.w-1;m(17>=z){17=z-1}k d=1x[17]||[];l{18:p,1y:d[1],1z:b||V}},19:9(a,b){k c=a.G,q=\'2G\'+a.q+(b?\'2H\':\'\'),s=$I(q);m(!s){s=14.1R(\'u\');s.q=q;s.1p=\'1j-11-2I\'+(b?\'-v\':\'\');s.J.2J=\'\';s.1q=[\'<u W="1y"></u>\',\'<u W="2K"></u>\',\'<u W="2L"></u>\'].1T(\'\');a.8.U.1U(s)}k d=s.2M,1a=b?\'F\':\'E\',N=7.1Z(a,b);$.15.16(\'2N:\',d,N);d[0].J[1a]=N.18+\'1A\';d[0].1q=N.1y;d[1].J[1a]=N.18+\'1A\';d[2].J[1a]=N.18+\'1A\';m(!b&&c.1z&&c.Y&&c.Y.X>0){7.19(a,t)}l 7},1B:9(a){k b=a.G,8=a.8,4=a.4,n=a.n;m(!b.21){l 7}k c=0.1;n.2O(0,0,8.E,8.F);n.2P=\'#2Q\';n.2R=c;m(b.22){n.2S([1,1])}k d=b.23*(b.1C?1:4.o);k e=b.24*(b.1C?1:4.o);k f=1D.25(-4.K/d)*d+4.K;k g=1D.25(-4.L/e)*e+4.L;26(27 x=f;x<8.E;x+=d){n.1E();n.28(x+c,0);n.29(x+c,8.F);n.2a()}26(27 y=g;y<8.F;y+=e){n.1E();n.28(0,y+c);n.29(8.E,y+c);n.2a()}l 7},2b:9(a){k b=a.8,4=a.4,2c=b.U,1F=$.2T(2c),1b=1F.E/2,1c=1F.F/2,x=1b*4.o+4.K,y=1c*4.o+4.L;l{x:x,y:y,1b:1b,1c:1c}},2e:9(a,b,c,d,e){k f=c.x*e.o+e.K;k g=c.y*e.o+e.L;m(f>=-d&&f<=a.E+d&&g>=-d&&g<=a.F+d){b.1E();b.2U(f,g,d/2,0,1D.2V*2);b.2W()}l 7},1d:9(a){k b=a.8,n=a.n,r=a.4.r,2f=r.X,1G=7.2b(a);15.16(\'1d:\',r,1G);m(2f<=0){l 7}n.2X=\'2Y\';k c=3;7.2e(b,n,1G,c,a.4);l 7},A:9(a,b){m(b){m(j.1m(a)){j.19(a).1B(a).1d(a)}}D{j.1m(a);j.19(a).1B(a).1d(a)}l 7}};9 1l(a){k b=$.T({23:p,24:p,1v:[[B*6*6,\'B公里\'],[p*6*6,\'p公里\'],[20*6*6,\'20公里\'],[10*6*6,\'10公里\'],[5*6*6,\'5公里\'],[3*6*6,\'3公里\'],[2*6*6,\'2公里\'],[6*6,\'1公里\'],[O*6,\'O米\'],[P*6,\'P米\'],[Q*6,\'Q米\'],[R*6,\'R米\'],[B*6,\'B米\'],[p*6,\'p米\'],[S*6,\'S米\'],[30*6,\'30米\'],[20*6,\'20米\'],[10*6,\'10米\'],[2g,\'5米\'],[2h,\'2米\'],[6,\'1米\'],[O,\'p厘米\'],[P,\'S厘米\'],[Q,\'30厘米\'],[R,\'20厘米\'],[B,\'10厘米\'],[p,\'5厘米\'],[20,\'2厘米\'],[10,\'1厘米\'],[5,\'5毫米\'],[2,\'2毫米\'],[1,\'1毫米\']],Y:[[6*6,\'1公里\'],[O*6,\'O米\'],[P*6,\'P米\'],[Q*6,\'Q米\'],[R*6,\'R米\'],[B*6,\'B米\'],[p*6,\'p米\'],[S*6,\'S米\'],[30*6,\'30米\'],[20*6,\'20米\'],[10*6,\'10米\'],[2g,\'5米\'],[2h,\'2米\'],[6,\'1米\'],[O,\'p厘米\'],[P,\'S厘米\'],[Q,\'30厘米\'],[R,\'20厘米\'],[B,\'10厘米\'],[p,\'5厘米\'],[20,\'2厘米\'],[10,\'1厘米\'],[5,\'5毫米\'],[2,\'2毫米\'],[1,\'1毫米\']],1z:V,w:13,1C:t,21:t,22:t,r:[]},a);7.4={1n:0,1o:0,o:b.o||1.0,w:b.w,K:0,L:0,Z:V,1e:0,1f:0,r:[]};m($.2i(b.r)){7.4.r.2Z(b.r)}7.G=b;7.8=$.1N(b.8);7.q=7.8.q;m(7.8){7.n=7.8.31(\'2d\');7.8.U.J.32=\'33\'}7.2j()}1l.34={2j:9(){k b=7,35=b.G,4=b.4,8=b.8;j.1Q(b).A(b);$.M(36,\'37\',9(){$.38({39:p,3a:3b},9(){j.A(b)})});$.M(8,\'3c\',9(e){m(e.3d||e.3e){1g 2k=(e.1h-4.K)/4.o;1g 2l=(e.1i-4.L)/4.o;4.r.3f({x:2k,y:2l});j.A(b)}D{4.Z=t;4.1e=e.1h;4.1f=e.1i;8.J.2m=\'3g\'}});$.M([8,14],\'3h\',9(e){$.3i(e);m(4.Z){1g 2n=e.1h-4.1e;1g 2o=e.1i-4.1f;4.K+=2n;4.L+=2o;4.1e=e.1h;4.1f=e.1i;j.A(b)}});$.M([8,14],\'3j\',9(e){m(4.Z){4.Z=V;8.J.2m=\'3k\'}});$.M([8],\'3l\',9(e){e.3m();k a=-e.3n;j.1t(b,1,a<0?-1:1).A(b)});l 7},1r:9(a){l 7},3o:9(a){l 7},3p:9(){l 7},3q:9(a){k b=7;b.4.r=$.2i(a)?a:[];l j.A(b),b},o:9(a,b){l j.1t(7,a,b).A(7),7}};$.T({11:9(a,b){l j.1M(a,b)}})}(3r);',62,214,'||||state||1000|this|canvas|function|||||||||||var|return|if|ctx|scale|50|id|points|elem|true|div||scaleLevel|||max|drawGridMap|100|map|else|width|height|options|curLevel||style|offsetX|offsetY|addListener|ratio|500|400|300|200|40|extend|parentNode|false|class|length|heightRules|isDragging||gridmap|curHeight||document|console|log|level|grid|setRatioRule|attr|xc|yc|drawPoints|lastX|lastY|const|clientX|clientY|oui|caches|GridMap|setCanvasSize|canvasWidth|canvasHeight|className|innerHTML|add|css|setScaleLevel|maxScale|scaleRules|maxHeightScale|rules|text|vertical|px|drawGrid|gridFixed|Math|beginPath|size|pc|FilePath|FileName|getCache|gm_|setCache|buildGridMap|toElement|lastWidth|lastHeight|buildScaleBar|createElement|sub|join|appendChild|target|tag|case|break|getRatioRule||showLine|dashLine|gridWidth|gridHeight|floor|for|let|moveTo|lineTo|stroke|getCanvasCenter|parent||drawPoint|len|5000|2000|isArray|initial|worldX|worldY|cursor|dx|dy|use|strict|getScriptSelfPath|loadJsScriptCss|isElement|isString|null|new|offsetWidth|offsetHeight|click|tagName|toLowerCase|trim|split|switch|isNumber|oui_gridmap_rule_|_v|rule|cssText|line2|line|childNodes|nodes|clearRect|strokeStyle|000|lineWidth|setLineDash|getOffset|arc|PI|fill|fillStyle|red|concat||getContext|position|relative|prototype|opt|window|resize|debounce|delay|timeout|3000|mousedown|ctrlKey|metaKey|push|grabbing|mousemove|cancelBubble|mouseup|default|wheel|preventDefault|deltaY|remove|clear|update|OUI'.split('|'),0,{}))
