
/*
	@Title: OUI
	@Description：JS通用代码库
	@Author: oukunqing
	@License：MIT

	$.timebar 时间刻度
*/

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!A($){\'2V 2W\';7 r={2k:$.2X(U),2l:\'1g.11.\',1T:36,1U:1};$.2Y(r.2k,\'\',A(){},r.2l);7 u={1V:{},2m:A(a){B u.1V[\'2n\'+a]},2o:A(a,b){u.1V[\'2n\'+a]={V:a,1h:b,};B K}};7 v={2p:A(a,b){7 c={};8($.2Z(a)){$.1c(c,b,{H:a,V:a.V})}Q 8($.1B(a,U)){7 d=$.31(a);$.1c(c,b,{H:d,V:a})}Q{$.1c(c,a,b)}8(!c.H){B 1W}7 e=u.2m(c.V),1h;8(e){1h=e.1h.2q(c)}Q{1h=1X 1Y(c)}u.2o(c.V,1h);B 1h},2r:A(a){7 b=a.W,N=a.1i,I=1C.2s(\'32\');$.33(N.H,\'1g-11\');N.H.34.G=b.G+\'35\';I.1r=\'1g-11-I\';N.H.2t(I);$.1c(N,{I:I,R:I.37(\'2d\')});8(b.2u){7 c=1C.2s(\'38\'),1D=b.13.1d>1?[\'<a 1E="2v"></a>\',\'<a 1E="2w"></a>\']:[];8(b.2x){1D.O(\'<a 1E="2y"></a>\')}8(b.2z){1D.O(\'<a 1E="2A"></a>\')}c.1r=\'1g-11-39\';c.3a=1D.2B(\'\');N.H.2t(c)}B K},1Z:A(a){7 b=a.1i,C=b.H.3b,G=b.H.3c;b.I.C=C;b.I.G=G;B K},2C:A(a){7 b=a.z,F=v.1j(a),14=F.S,2D=b.15.1F().1e(),E=b.E,J=v.1G(a,E),21=P(J-(J%(14*1f)),10),2E=21+14*1f;A 17(){B b.15.1F().1e()}B{2F:17().1v(21).1k(),2G:17().1v(2E).1k(),1l:17().1v(J).1k()}},1G:A(a,b){7 c=a.z,F=v.1j(a),X=F.C,14=F.S,2D=c.15.1F().1e();B(b>0?-1:1)*1w.1x(b)*(14/X*1f)},1H:A(a){7 b=a.z,F=v.1j(a),X=F.C,14=F.S,J=b.1l.1I(b.15).1J,E=J/(14/X*1f);b.E=-E;B K},22:A(a){7 b=a.z,D=a.W,F=v.1j(a);8($.1m(D.Y)){7 c=1w.1x(D.Y.1I(b.15).1J)/F.J;8(b.E<0&&b.E<-c){b.E=-c}b.23=c}8($.1m(D.Z)){7 d=1w.1x(D.Z.1I(b.15).1J)/F.J;8(b.E>0&&b.E>d){b.E=d}b.24=d}B K},2H:A(a,b){8(b===1){B a}7 c=a.3d(1),18=c.1d,19=[];8(18===6){19.O(P(\'1s\'+c[0]+c[1]));19.O(P(\'1s\'+c[2]+c[3]));19.O(P(\'1s\'+c[4]+c[5]))}Q 8(18===3){19.O(P(\'1s\'+c[0]+c[0]));19.O(P(\'1s\'+c[1]+c[1]));19.O(P(\'1s\'+c[2]+c[2]))}19.O(b);B\'3e(\'+19.2B(\',\')+\')\'},25:A(a){7 b=a.W;8(!$.1m(b.Z)||!$.1m(b.Y)){B[]}7 d=a.1i.I.C/2,z=a.z,E=a.z.E,2I=z.15.3f()/3g,J=b.Y.1I(b.Z).1J,F=v.1j(a),C=P(J/F.J,10),1a=z.1a,1y=[],1n=[],i=0,j=0,c=C;1t(i=0;i<c;i++){1y[i]=0}1t(i=0;i<1a.1d;i++){7 s=1a[i]+3h-2I,p=P(s/F.J,10)+(s%F.J?1:0);1y[p]=1}1t(i=0;i<c;i++){8(1y[i]){8(j>0){7 p=1n[j-1],2J=i-p.x,2K=i-(p.x+p.w);8(2K<=1){p.w+=1}Q 8(2J<=1){}Q{1n.O({x:i,w:1});j++}}Q{1n.O({x:i,w:1});j++}}}8(1n.1d>0){$.2L.2M(\'25:\',J,F,C,1y,1n)}B 1n},1b:A(j,k){7 l=j.1i,D=j.W,I=l.I,R=l.R,C=I.C,G=I.G,L=P(C/2,10),z=j.z,T=z.T,F=v.1j(j),X=F.C,14=F.S,1o=0,1z=0;v.22(j);7 m=z.E,26=1w.1x(m)<=L?3:m<0?1:2;R.3i(0,0,C,G);7 n=17();7 o=v.25(j);1t(7 i=0;i<o.1d;i++){7 p=o[i],x=p.x+L+m;1A(R,\'#3j\',0.9,p.w,x+p.w/2,x+p.w/2,G-T+1,G)}8(26%2>0){7 w=$.1K(z.23)&&!D.2N?(z.23+z.E+1):L;8(w>L){w=L}1o=1w.1x(m)+w;1z=P(1o/X,10)+(1o%X?1:0);27(1z,0)}n=17();8(26>1){7 w=$.1K(z.24)&&!D.2O?(z.24-z.E+1):L;8(w>L){w=L}1o=m+w;1z=P(1o/X,10)+(1o%X?1:0);27(1z,1)}1A(R,\'#3k\',1,2,0,C,G-T,G-T);1A(R,\'#3l\',0.9,2,L,L,0,G);7 q=v.1G(j,m);z.1l=17().1v(q);1L(R,z.1l.1k(),\'3m 28\',\'#3n\',L,G-T-16);8(k){n=17();q=v.1G(j,-((k-z.E)-(C/2)));1L(R,n.1v(q).1k(),\'2P 28\',\'#3o\',k,12)}A 17(){B z.15.1k().1e()}A 1A(a,b,c,d,e,f,g,h){a.3p();a.3q(e,g);a.3r(f,h);a.3s=v.2H(b,c);a.3t=d;a.3u()}A 1L(a,b,c,d,x,y){a.3v=c;a.3w=d;a.3x=\'L\';a.3y(b,x,y)}A 27(a,b){1t(7 i=0;i<a;i++){7 x=(b?-1:1)*(i*X)+(L+m);1A(R,\'#3z\',1,1,x,x,G-T+1,G);n.3A((b?-1:1)*(i?1:0)*14);1L(R,n.1k(\'3B:3C\'),\'2P 28\',\'#3D\',x,G-T-4)}}B K.1u(j)},1u:A(a){7 b=K,D=a.W,z=a.z;8($.3E(D.1u)){7 c=$.3F(v.2C(a));8(c===z.29){B b}z.29=c;$.3G({V:\'1g-11\'+a.V,3H:3I,3J:3K},A(){D.1u(c,a)})}B b},1j:A(a){7 b=a.W.13,18=b.1d,M=a.z.1M;M=M<0?0:M>=18?18-1:M;B b[M]},2a:A(a,b){7 c=a.z,18=a.W.13.1d,M=c.1M+b;M=M<0?0:M>=18?18-1:M;c.1M=M;B K.1H(a).1b(a)},2b:A(a,b){7 c=a.z;8(b){c.1l=1X 2Q()}Q{c.1l=c.2R}B K.1H(a).1b(a)},2S:A(b){7 c=$.1c({G:1f,T:20,1p:1X 2Q(),13:[[1q,1q],[1q,1f],[1q,30],[2T,30],[1q,10],[1q,5],[2T,5]],M:1,1a:[],1u:A(a,t){2L.2M(\'11-1u:\',a,t)},Z:1W,Y:1W,2O:U,2N:U,2u:U,2x:1N,2z:1N},b);8(!$.1m(c.1p)){c.1p=c.1p.1F().1e()}8(!$.1m(c.Z)&&($.1B(c.Z,U)||$.1K(c.Z))){c.Z=c.Z.1e()}8(!$.1m(c.Y)&&($.1B(c.Y,U)||$.1K(c.Y))){c.Y=c.Y.1e()}8(!$.2c(c.13)){c.13=[{C:1q,S:1f}]}7 e=[];1t(7 i=0;i<c.13.1d;i++){7 f=c.13[i],d;8($.2c(f)){d={C:f[0],S:f[1]}}Q 8($.3L(f)&&f.C&&f.S){d=f}Q 8($.1B(f,U)){7 g=f.3M(/[,|;]/);d={C:g[0],S:g[1]}}8(d.C<r.1T){d.C=r.1T}8(d.S<r.1U){d.S=r.1U}d.J=d.S/d.C*1f;e.O(d)}c.13=e;8(!$.2c(c.1a)){c.1a=[]}B c}};A 1Y(a){K.z={E:0,1O:1N,1P:0,2F:\'\',2G:\'\',29:\'\'};K.2e(a).2f()}1Y.3N={2e:A(a){7 b=K,D=v.2S(a);b.W=D;b.V=b.W.V;8(!b.1i){b.1i={H:D.H}}$.1c(b.z,{15:D.1p.3O().1e(),2R:D.1p,1l:D.1p,1a:D.1a||[],T:D.T,1M:D.M});B b},2f:A(b){7 c=K,z=c.z,N=c.1i;8(!N.I){v.2r(c);$.2g(3P,\'3Q\',A(){v.1Z(c).1b(c)});$.2g(N.H,\'3R\',A(e){$.3S(e);7 a=e.1Q,2h=a.1r;3T(2h){1R\'2w\':v.2a(c,1);1S;1R\'2v\':v.2a(c,-1);1S;1R\'2y\':v.2b(c);1S;1R\'2A\':v.2b(c,1);1S}});$.2g(N.H,\'3U\',A(e){7 a=e.1Q,2h=a.1r;8(e.1Q.1r.2U(\'1g-11\')<0){B U}z.1O=U;z.1P=e.2i;v.1b(c)});1C.2j(\'3V\',(e)=>{8(z.1O){7 d=e.2i-z.1P;z.E+=d;z.1P=e.2i;v.22(c).1b(c)}Q 8(e.1Q.1r.2U(\'1g-11\')>-1){v.1b(c,e.3W-N.H.3X)}});N.H.2j(\'3Y\',()=>{v.1b(c)});1C.2j(\'3Z\',()=>{z.1O=1N})}v.1Z(c).1H(c).1b(c);B c},2q:A(a){7 b=K,D=$.1c(b.W,a);B b.2e(D).2f()}};$.1c({11:A(a,b){B v.2p(a,b)}})}(40);',62,249,'|||||||var|if|||||||||||||||||||||||||||cache|function|return|width|opt|offset|rule|height|box|canvas|seconds|this|center|level|obj|push|parseInt|else|ctx|minutes|tickHeight|true|id|options|tickWidth|maxTime|minTime||timebar||rules|tickMinutes|defaultTime||_dt|len|numbers|data|drawScale|extend|length|toDate|60|oui|ts|elements|getRule|format|currentTime|isDate|lines|scaleWidth|time|120|className|0x|for|callback|addSeconds|Math|abs|points|tickCount|_drawline|isString|document|html|class|toString|getTimeOffset|setOffset|timeSpan|totalSeconds|isNumber|_drawtext|ruleLevel|false|dragging|lastX|target|case|break|MinTickWidth|MinTickMinutes|caches|null|new|TimeBar|setSize||start|checkOffsetLimit|leftMaxOffset|rightMaxOffset|getDataLines|mode|_drawscale|Arial|range|setRuleLevel|resetOffset|isArray||initial|build|addListener|css|offsetX|addEventListener|FilePath|FileName|getCache|ts_|setCache|buildTimeBar|update|buildElement|createElement|appendChild|showPanel|sub|add|showOrigin|ori|showReload|rel|join|getTimeRange|dt|end|startTime|endTime|buildStrokeStyle|defaultTs|n1|n2|console|log|showRight|showLeft|12px|Date|originTime|checkOptions|240|indexOf|use|strict|getScriptSelfPath|loadJsScriptCss|isElement||toElement|CANVAS|addClass|style|px||getContext|DIV|bar|innerHTML|offsetWidth|offsetHeight|substr|rgba|getTime|1000|86400|clearRect|00ff00|555|fc0|14px|ccc|ddd|beginPath|moveTo|lineTo|strokeStyle|lineWidth|stroke|font|fillStyle|textAlign|fillText|999|addMinutes|HH|mm|aaa|isFunction|toJsonString|debounce|delay|100|timeout|5000|isObject|split|prototype|dayStart|window|resize|click|cancelBubble|switch|mousedown|mousemove|clientX|offsetLeft|mouseout|mouseup|OUI'.split('|'),0,{}))
