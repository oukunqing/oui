
/*
	@Title: OUI
	@Description：JS通用代码库
	@Author: oukunqing
	@License：MIT

	$.timebar 时间刻度
*/

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!A($){\'35 37\';8 r={2p:$.38(Q),2q:\'1t.1c.\',1X:36,1Y:1};$.39(r.2p,\'\',A(){},r.2q);8 u={1Z:{},2r:A(a){B u.1Z[\'2s\'+a]},2t:A(a,b){u.1Z[\'2s\'+a]={W:a,1k:b,};B K}};8 v={2u:A(a,b){8 c={};7($.3a(a)){$.1d(c,b,{I:a,W:a.W})}O 7($.1G(a,Q)){8 d=$.3b(a);$.1d(c,b,{I:d,W:a})}O{$.1d(c,a,b)}7(!c.I){B 21}8 e=u.2r(c.W),1k;7(e){1k=e.1k.2v(c)}O{1k=22 23(c)}u.2t(c.W,1k);B 1k},2w:A(a){8 b=a.S,L=a.1l,F=1H.2x(\'3c\');$.3d(L.I,\'1t-1c\');L.I.3e.H=b.H+\'3f\';F.1u=\'1t-1c-F\';L.I.2y(F);$.1d(L,{F:F,T:F.3g(\'2d\')});7(b.2z){8 c=1H.2x(\'3h\'),1I=b.14.1e>1?[\'<a 1J="2A"></a>\',\'<a 1J="2B"></a>\']:[];7(b.2C){1I.R(\'<a 1J="2D" 2E="起始时间"></a>\')}7(b.2F){1I.R(\'<a 1J="2G" 2E="当前时间"></a>\')}c.1u=\'1t-1c-3i\';c.3j=1I.2H(\'\');L.I.2y(c)}B K},24:A(a){8 b=a.1l,D=b.I.3k,H=b.I.3l;b.F.D=D;b.F.H=H;B K},2I:A(a,b){8 c=a.z,G=v.1m(a),15=G.U,2J=c.17.1K().1f(),E=c.E,J=v.1A(a,E),25=P(J-(J%(15*1g)),10),2K=25+15*1g;A X(){B c.17.1K().1f()}8 d={2L:X().1v(25).1h(),2M:X().1v(2K).1h(),1n:X().1v(J).1h(),};7($.18(b)){8 e=v.1L(a,E-b),2N=v.1A(a,e);d[\'3m\']=X().1v(2N).1h()}B d},1A:A(a,b){8 c=a.z,G=v.1m(a),Y=G.D,15=G.U,2J=c.17.1K().1f();B(b>0?-1:1)*1B.1C(b)*(15/Y*1g)},1M:A(a){8 b=a.z,G=v.1m(a),Y=G.D,15=G.U,J=b.1n.1N(b.17).1O,E=J/(15/Y*1g);b.E=-E;B K},1L:A(a,b){8 c=a.z,C=a.S,G=v.1m(a);7($.1o(C.Z)){8 d=1B.1C(C.Z.1N(c.17).1O)/G.J;7($.18(b)){7(b<0&&b<-d){b=-d}}O{7(c.E<0&&c.E<-d){c.E=-d}c.26=d}}7($.1o(C.11)){8 e=1B.1C(C.11.1N(c.17).1O)/G.J;7($.18(b)){7(b>0&&b>e){b=e}}O{7(c.E>0&&c.E>e){c.E=e}c.27=e}}B $.18(b)?b:K},2O:A(a,b){7(b===1){B a}8 c=a.3n(1),19=c.1e,1a=[];7(19===6){1a.R(P(\'1w\'+c[0]+c[1]));1a.R(P(\'1w\'+c[2]+c[3]));1a.R(P(\'1w\'+c[4]+c[5]))}O 7(19===3){1a.R(P(\'1w\'+c[0]+c[0]));1a.R(P(\'1w\'+c[1]+c[1]));1a.R(P(\'1w\'+c[2]+c[2]))}1a.R(b);B\'3o(\'+1a.2H(\',\')+\')\'},28:A(a){8 b=a.S;7(!$.1o(b.11)||!$.1o(b.Z)){B[]}8 d=a.1l.F.D/2,z=a.z,E=a.z.E,2P=z.17.3p()/3q,J=b.Z.1N(b.11).1O,G=v.1m(a),D=P(J/G.J,10),1b=z.1b,1D=[],1p=[],i=0,j=0,c=D;1x(i=0;i<c;i++){1D[i]=0}1x(i=0;i<1b.1e;i++){8 s=1b[i]-2P,p=P(s/G.J,10)+(s%G.J?1:0);1D[p]=1}1x(i=0;i<c;i++){7(1D[i]){7(j>0){8 p=1p[j-1],2Q=i-p.x,2R=i-(p.x+p.w);7(2R<=1){p.w+=1}O 7(2Q<=1){}O{1p.R({x:i,w:1});j++}}O{1p.R({x:i,w:1});j++}}}7(1p.1e>0&&b.3r){$.2S.2T(\'28:\',J,G,D,1D,1p)}B 1p},1i:A(j,k){8 l=j.1l,C=j.S,F=l.F,T=l.T,D=F.D,H=F.H,M=P(D/2,10),z=j.z,V=z.V,G=v.1m(j),Y=G.D,15=G.U,1q=0,1E=0;v.1L(j);8 m=z.E,29=1B.1C(m)<=M?3:m<0?1:2;T.3s(0,0,D,H);8 n=X();8 o=v.28(j);1x(8 i=0;i<o.1e;i++){8 p=o[i],x=p.x+M+m;1F(T,\'#3t\',0.9,p.w,x+p.w/2,x+p.w/2,H-V+1,H)}7(29%2>0){8 w=$.18(z.26)&&!C.2U?(z.26+z.E+1):M;7(w>M){w=M}1q=1B.1C(m)+w;1E=P(1q/Y,10)+(1q%Y?1:0);2a(1E,0)}n=X();7(29>1){8 w=$.18(z.27)&&!C.2V?(z.27-z.E+1):M;7(w>M){w=M}1q=m+w;1E=P(1q/Y,10)+(1q%Y?1:0);2a(1E,1)}1F(T,\'#3u\',1,2,0,D,H-V,H-V);1F(T,\'#3v\',0.9,2,M,M,0,H);8 q=v.1A(j,m);z.1n=X().1v(q);1P(T,z.1n.1h(),\'3w 2b\',\'#3x\',M,H-V-16);7(k){n=X();q=v.1A(j,-((k-z.E)-(D/2)));1P(T,n.1v(q).1h(),\'2W 2b\',\'#3y\',k,12)}A X(){B z.17.1h().1f()}A 1F(a,b,c,d,e,f,g,h){a.3z();a.3A(e,g);a.3B(f,h);a.3C=v.2O(b,c);a.3D=d;a.3E()}A 1P(a,b,c,d,x,y){a.3F=c;a.3G=d;a.3H=\'M\';a.3I(b,x,y)}A 2a(a,b){1x(8 i=0;i<a;i++){8 x=(b?-1:1)*(i*Y)+(M+m);1F(T,\'#3J\',1,1,x,x,H-V+1,H);n.3K((b?-1:1)*(i?1:0)*15);1P(T,n.1h(\'3L:3M\'),\'2W 2b\',\'#3N\',x,H-V-4)}}B K.1r(j)},1r:A(a,b){8 c=K,C=a.S,z=a.z;7($.3O(C.1r)){8 d=v.2I(a,b),2c=$.3P(d);7(2c===z.2e){B c}z.2e=2c;$.3Q({W:\'1t-1c\'+a.W,3R:3S,3T:3U},A(){C.1r(d,a)})}B c},1m:A(a){8 b=a.S.14,19=b.1e,N=a.z.1Q;N=N<0?0:N>=19?19-1:N;B b[N]},2f:A(a,b){8 c=a.z,19=a.S.14.1e,N=c.1Q+b;N=N<0?0:N>=19?19-1:N;c.1Q=N;B K.1M(a).1i(a)},2g:A(a,b){8 c=a.z;7(b){c.1n=22 2X()}O{c.1n=c.2Y}B K.1M(a).1i(a)},2Z:A(b){8 c=$.1d({H:1g,V:20,13:22 2X(),14:[[1s,1s],[1s,1g],[1s,30],[31,30],[1s,10],[1s,5],[31,5]],N:1,1b:[],1r:A(a,t){2S.2T(\'1c-1r:\',a,t)},11:21,Z:21,2V:Q,2U:Q,2z:Q,2C:1j,2F:1j,2h:\'2i\'},b);7(!$.1o(c.13)){7($.18(c.13)){c.13=P(c.13,10)}c.13=c.13.1K().1f()}7(!$.1o(c.11)&&($.1G(c.11,Q)||$.18(c.11))){c.11=c.11.1f()}7(!$.1o(c.Z)&&($.1G(c.Z,Q)||$.18(c.Z))){c.Z=c.Z.1f()}7(!$.2j(c.14)){c.14=[{D:1s,U:1g}]}8 e=[];1x(8 i=0;i<c.14.1e;i++){8 f=c.14[i],d;7($.2j(f)){d={D:f[0],U:f[1]}}O 7($.3V(f)&&f.D&&f.U){d=f}O 7($.1G(f,Q)){8 g=f.3W(/[,|;]/);d={D:g[0],U:g[1]}}7(d.D<r.1X){d.D=r.1X}7(d.U<r.1Y){d.U=r.1Y}d.J=d.U/d.D*1g;e.R(d)}c.14=e;7(!$.2j(c.1b)){c.1b=[]}B c}};A 23(a){K.z={E:0,1R:1j,1y:1j,1S:0,2L:\'\',2M:\'\',2e:\'\'};K.2k(a).2l()}23.3X={2k:A(a){8 b=K,C=v.2Z(a);b.S=C;b.W=b.S.W;7(!b.1l){b.1l={I:C.I}}$.1d(b.z,{17:C.13.3Y().1f(),2Y:C.13,1n:C.13,1b:C.1b||[],V:C.V,1Q:C.N});B b},2l:A(b){8 c=K,C=c.S,z=c.z,L=c.1l;7(!L.F){v.2w(c);$.2m(3Z,\'40\',A(){v.24(c).1i(c)});$.2m(L.I,\'2i\',A(e){$.41(e);8 a=e.1z,2n=a.1u;42(2n){1T\'2B\':v.2f(c,1);1U;1T\'2A\':v.2f(c,-1);1U;1T\'2D\':v.2g(c);1U;1T\'2G\':v.2g(c,1);1U}});$.2m(L.I,\'43\',A(e){8 a=e.1z,2n=a.1u;7(e.1z.32.33()!==\'F\'){B Q}z.1R=Q;z.1y=1j;z.1S=e.1V});1H.1W(\'44\',(e)=>{7(e.1z.32.33()!==\'F\'){B Q}7(z.1R){8 d=e.1V-z.1S;z.E+=d;z.1S=e.1V;z.1y=Q;v.1L(c).1i(c)}O 7(e.1z.1u.2o(\'1t-1c\')>-1){v.1i(c,e.45-L.I.46)}});L.I.1W(\'47\',()=>{v.1i(c)});1H.1W(\'34\',()=>{z.1R=1j;z.1y=1j});7([\'34\',\'2i\',\'48\'].2o(C.2h)>-1){L.I.1W(C.2h,(e)=>{7(!z.1y&&e.1z.1u.2o(\'F\')>-1){v.1r(c,e.1V-L.F.D/2)}z.1y=1j})}}v.24(c).1M(c).1i(c);B c},2v:A(a){8 b=K,C=$.1d(b.S,a);B b.2k(C).2l()}};$.1d({1c:A(a,b){B v.2u(a,b)}})}(49);',62,258,'|||||||if|var|||||||||||||||||||||||||||cache|function|return|opt|width|offset|canvas|rule|height|box|seconds|this|obj|center|level|else|parseInt|true|push|options|ctx|minutes|tickHeight|id|_dt|tickWidth|maxTime||minTime||time|rules|tickMinutes||defaultTime|isNumber|len|numbers|data|timebar|extend|length|toDate|60|format|drawScale|false|ts|elements|getRule|currentTime|isDate|lines|scaleWidth|callback|120|oui|className|addSeconds|0x|for|moving|target|getTimeOffset|Math|abs|points|tickCount|_drawline|isString|document|html|class|toString|checkOffsetLimit|setOffset|timeSpan|totalSeconds|_drawtext|ruleLevel|dragging|lastX|case|break|offsetX|addEventListener|MinTickWidth|MinTickMinutes|caches||null|new|TimeBar|setSize|start|leftMaxOffset|rightMaxOffset|getDataLines|mode|_drawscale|Arial|strRange||range|setRuleLevel|resetOffset|clickEvent|click|isArray|initial|build|addListener|css|indexOf|FilePath|FileName|getCache|ts_|setCache|buildTimeBar|update|buildElement|createElement|appendChild|showPanel|sub|add|showOrigin|ori|title|showReload|rel|join|getTimeRange|dt|end|startTime|endTime|clickSeconds|buildStrokeStyle|defaultTs|n1|n2|console|log|showRight|showLeft|12px|Date|originTime|checkOptions||240|tagName|toLowerCase|mouseup|use||strict|getScriptSelfPath|loadJsScriptCss|isElement|toElement|CANVAS|addClass|style|px|getContext|DIV|bar|innerHTML|offsetWidth|offsetHeight|clickTime|substr|rgba|getTime|1000|debug|clearRect|00ff00|555|fc0|14px|ccc|ddd|beginPath|moveTo|lineTo|strokeStyle|lineWidth|stroke|font|fillStyle|textAlign|fillText|999|addMinutes|HH|mm|aaa|isFunction|toJsonString|debounce|delay|100|timeout|5000|isObject|split|prototype|dayStart|window|resize|cancelBubble|switch|mousedown|mousemove|clientX|offsetLeft|mouseout|dblclick|OUI'.split('|'),0,{}))
