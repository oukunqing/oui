
/*
	@Title: OUI
	@Description：JS通用代码库
	@Author: oukunqing
	@License：MIT

	$.timebar 时间刻度
*/

eval(function(p,a,c,k,e,r){e=function(c){return(c<a?'':e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)r[e(c)]=k[c]||e(c);k=[function(e){return r[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('!A($){\'33 34\';8 r={2o:$.35(P),2p:\'1t.1a.\',1W:36,1X:1};$.37(r.2o,\'\',A(){},r.2p);8 u={1Y:{},2q:A(a){B u.1Y[\'2r\'+a]},2s:A(a,b){u.1Y[\'2r\'+a]={W:a,1j:b,};B L}};8 v={2t:A(a,b){8 c={};7($.38(a)){$.1b(c,b,{I:a,W:a.W})}O 7($.1G(a,P)){8 d=$.39(a);$.1b(c,b,{I:d,W:a})}O{$.1b(c,a,b)}7(!c.I){B 1Z}8 e=u.2q(c.W),1j;7(e){1j=e.1j.2u(c)}O{1j=21 22(c)}u.2s(c.W,1j);B 1j},2v:A(a){8 b=a.S,J=a.1k,F=23.2w(\'3a\');$.3b(J.I,\'1t-1a\');J.I.3c.H=b.H+\'3d\';F.1u=\'1t-1a-F\';J.I.2x(F);$.1b(J,{F:F,T:F.3e(\'2d\')});7(b.2y){8 c=23.2w(\'3f\'),1H=b.13.1c>1?[\'<a 1I="2z"></a>\',\'<a 1I="2A"></a>\']:[];7(b.2B){1H.Q(\'<a 1I="2C"></a>\')}7(b.2D){1H.Q(\'<a 1I="2E"></a>\')}c.1u=\'1t-1a-3g\';c.3h=1H.2F(\'\');J.I.2x(c)}B L},24:A(a){8 b=a.1k,D=b.I.3i,H=b.I.3j;b.F.D=D;b.F.H=H;B L},2G:A(a,b){8 c=a.z,G=v.1l(a),14=G.U,2H=c.15.1J().1d(),E=c.E,K=v.1A(a,E),25=R(K-(K%(14*1e)),10),2I=25+14*1e;A X(){B c.15.1J().1d()}8 d={2J:X().1v(25).1f(),2K:X().1v(2I).1f(),1m:X().1v(K).1f(),};7($.1g(b)){8 e=v.1K(a,E-b),2L=v.1A(a,e);d[\'3k\']=X().1v(2L).1f()}B d},1A:A(a,b){8 c=a.z,G=v.1l(a),Y=G.D,14=G.U,2H=c.15.1J().1d();B(b>0?-1:1)*1B.1C(b)*(14/Y*1e)},1L:A(a){8 b=a.z,G=v.1l(a),Y=G.D,14=G.U,K=b.1m.1M(b.15).1N,E=K/(14/Y*1e);b.E=-E;B L},1K:A(a,b){8 c=a.z,C=a.S,G=v.1l(a);7($.1n(C.Z)){8 d=1B.1C(C.Z.1M(c.15).1N)/G.K;7($.1g(b)){7(b<0&&b<-d){b=-d}}O{7(c.E<0&&c.E<-d){c.E=-d}c.26=d}}7($.1n(C.11)){8 e=1B.1C(C.11.1M(c.15).1N)/G.K;7($.1g(b)){7(b>0&&b>e){b=e}}O{7(c.E>0&&c.E>e){c.E=e}c.27=e}}B $.1g(b)?b:L},2M:A(a,b){7(b===1){B a}8 c=a.3l(1),17=c.1c,18=[];7(17===6){18.Q(R(\'1w\'+c[0]+c[1]));18.Q(R(\'1w\'+c[2]+c[3]));18.Q(R(\'1w\'+c[4]+c[5]))}O 7(17===3){18.Q(R(\'1w\'+c[0]+c[0]));18.Q(R(\'1w\'+c[1]+c[1]));18.Q(R(\'1w\'+c[2]+c[2]))}18.Q(b);B\'3m(\'+18.2F(\',\')+\')\'},28:A(a){8 b=a.S;7(!$.1n(b.11)||!$.1n(b.Z)){B[]}8 d=a.1k.F.D/2,z=a.z,E=a.z.E,2N=z.15.3n()/3o,K=b.Z.1M(b.11).1N,G=v.1l(a),D=R(K/G.K,10),19=z.19,1D=[],1o=[],i=0,j=0,c=D;1x(i=0;i<c;i++){1D[i]=0}1x(i=0;i<19.1c;i++){8 s=19[i]-2N,p=R(s/G.K,10)+(s%G.K?1:0);1D[p]=1}1x(i=0;i<c;i++){7(1D[i]){7(j>0){8 p=1o[j-1],2O=i-p.x,2P=i-(p.x+p.w);7(2P<=1){p.w+=1}O 7(2O<=1){}O{1o.Q({x:i,w:1});j++}}O{1o.Q({x:i,w:1});j++}}}7(1o.1c>0&&b.3p){$.2Q.2R(\'28:\',K,G,D,1D,1o)}B 1o},1h:A(j,k){8 l=j.1k,C=j.S,F=l.F,T=l.T,D=F.D,H=F.H,M=R(D/2,10),z=j.z,V=z.V,G=v.1l(j),Y=G.D,14=G.U,1p=0,1E=0;v.1K(j);8 m=z.E,29=1B.1C(m)<=M?3:m<0?1:2;T.3q(0,0,D,H);8 n=X();8 o=v.28(j);1x(8 i=0;i<o.1c;i++){8 p=o[i],x=p.x+M+m;1F(T,\'#3r\',0.9,p.w,x+p.w/2,x+p.w/2,H-V+1,H)}7(29%2>0){8 w=$.1g(z.26)&&!C.2S?(z.26+z.E+1):M;7(w>M){w=M}1p=1B.1C(m)+w;1E=R(1p/Y,10)+(1p%Y?1:0);2a(1E,0)}n=X();7(29>1){8 w=$.1g(z.27)&&!C.2T?(z.27-z.E+1):M;7(w>M){w=M}1p=m+w;1E=R(1p/Y,10)+(1p%Y?1:0);2a(1E,1)}1F(T,\'#3s\',1,2,0,D,H-V,H-V);1F(T,\'#3t\',0.9,2,M,M,0,H);8 q=v.1A(j,m);z.1m=X().1v(q);1O(T,z.1m.1f(),\'3u 2b\',\'#3v\',M,H-V-16);7(k){n=X();q=v.1A(j,-((k-z.E)-(D/2)));1O(T,n.1v(q).1f(),\'2U 2b\',\'#3w\',k,12)}A X(){B z.15.1f().1d()}A 1F(a,b,c,d,e,f,g,h){a.3x();a.3y(e,g);a.3z(f,h);a.3A=v.2M(b,c);a.3B=d;a.3C()}A 1O(a,b,c,d,x,y){a.3D=c;a.3E=d;a.3F=\'M\';a.3G(b,x,y)}A 2a(a,b){1x(8 i=0;i<a;i++){8 x=(b?-1:1)*(i*Y)+(M+m);1F(T,\'#3H\',1,1,x,x,H-V+1,H);n.3I((b?-1:1)*(i?1:0)*14);1O(T,n.1f(\'3J:3K\'),\'2U 2b\',\'#3L\',x,H-V-4)}}B L.1q(j)},1q:A(a,b){8 c=L,C=a.S,z=a.z;7($.3M(C.1q)){8 d=$.3N(v.2G(a,b));7(d===z.2c){B c}z.2c=d;$.3O({W:\'1t-1a\'+a.W,3P:3Q,3R:3S},A(){C.1q(d,a)})}B c},1l:A(a){8 b=a.S.13,17=b.1c,N=a.z.1P;N=N<0?0:N>=17?17-1:N;B b[N]},2e:A(a,b){8 c=a.z,17=a.S.13.1c,N=c.1P+b;N=N<0?0:N>=17?17-1:N;c.1P=N;B L.1L(a).1h(a)},2f:A(a,b){8 c=a.z;7(b){c.1m=21 2V()}O{c.1m=c.2W}B L.1L(a).1h(a)},2X:A(b){8 c=$.1b({H:1e,V:20,1r:21 2V(),13:[[1s,1s],[1s,1e],[1s,30],[2Y,30],[1s,10],[1s,5],[2Y,5]],N:1,19:[],1q:A(a,t){2Q.2R(\'1a-1q:\',a,t)},11:1Z,Z:1Z,2T:P,2S:P,2y:P,2B:1i,2D:1i,2g:\'2h\'},b);7(!$.1n(c.1r)){c.1r=c.1r.1J().1d()}7(!$.1n(c.11)&&($.1G(c.11,P)||$.1g(c.11))){c.11=c.11.1d()}7(!$.1n(c.Z)&&($.1G(c.Z,P)||$.1g(c.Z))){c.Z=c.Z.1d()}7(!$.2i(c.13)){c.13=[{D:1s,U:1e}]}8 e=[];1x(8 i=0;i<c.13.1c;i++){8 f=c.13[i],d;7($.2i(f)){d={D:f[0],U:f[1]}}O 7($.3T(f)&&f.D&&f.U){d=f}O 7($.1G(f,P)){8 g=f.3U(/[,|;]/);d={D:g[0],U:g[1]}}7(d.D<r.1W){d.D=r.1W}7(d.U<r.1X){d.U=r.1X}d.K=d.U/d.D*1e;e.Q(d)}c.13=e;7(!$.2i(c.19)){c.19=[]}B c}};A 22(a){L.z={E:0,1Q:1i,1y:1i,1R:0,2J:\'\',2K:\'\',2c:\'\'};L.2j(a).2k()}22.3V={2j:A(a){8 b=L,C=v.2X(a);b.S=C;b.W=b.S.W;7(!b.1k){b.1k={I:C.I}}$.1b(b.z,{15:C.1r.3W().1d(),2W:C.1r,1m:C.1r,19:C.19||[],V:C.V,1P:C.N});B b},2k:A(b){8 c=L,C=c.S,z=c.z,J=c.1k;7(!J.F){v.2v(c);$.2l(3X,\'3Y\',A(){v.24(c).1h(c)});$.2l(J.I,\'2h\',A(e){$.3Z(e);8 a=e.1z,2m=a.1u;40(2m){1S\'2A\':v.2e(c,1);1T;1S\'2z\':v.2e(c,-1);1T;1S\'2C\':v.2f(c);1T;1S\'2E\':v.2f(c,1);1T}});$.2l(J.I,\'41\',A(e){8 a=e.1z,2m=a.1u;7(e.1z.2Z.31()!==\'F\'){B P}z.1Q=P;z.1y=1i;z.1R=e.1U});J.I.1V(\'42\',(e)=>{7(e.1z.2Z.31()!==\'F\'){B P}7(z.1Q){8 d=e.1U-z.1R;z.E+=d;z.1R=e.1U;z.1y=P;v.1K(c).1h(c)}O 7(e.1z.1u.2n(\'1t-1a\')>-1){v.1h(c,e.43-J.I.44)}});J.I.1V(\'45\',()=>{v.1h(c)});23.1V(\'32\',()=>{z.1Q=1i;z.1y=1i});7([\'32\',\'2h\',\'46\'].2n(C.2g)>-1){J.I.1V(C.2g,(e)=>{7(!z.1y&&e.1z.1u.2n(\'F\')>-1){v.1q(c,e.1U-J.F.D/2)}z.1y=1i})}}v.24(c).1L(c).1h(c);B c},2u:A(a){8 b=L,C=$.1b(b.S,a);B b.2j(C).2k()}};$.1b({1a:A(a,b){B v.2t(a,b)}})}(47);',62,256,'|||||||if|var|||||||||||||||||||||||||||cache|function|return|opt|width|offset|canvas|rule|height|box|obj|seconds|this|center|level|else|true|push|parseInt|options|ctx|minutes|tickHeight|id|_dt|tickWidth|maxTime||minTime||rules|tickMinutes|defaultTime||len|numbers|data|timebar|extend|length|toDate|60|format|isNumber|drawScale|false|ts|elements|getRule|currentTime|isDate|lines|scaleWidth|callback|time|120|oui|className|addSeconds|0x|for|moving|target|getTimeOffset|Math|abs|points|tickCount|_drawline|isString|html|class|toString|checkOffsetLimit|setOffset|timeSpan|totalSeconds|_drawtext|ruleLevel|dragging|lastX|case|break|offsetX|addEventListener|MinTickWidth|MinTickMinutes|caches|null||new|TimeBar|document|setSize|start|leftMaxOffset|rightMaxOffset|getDataLines|mode|_drawscale|Arial|range||setRuleLevel|resetOffset|clickEvent|click|isArray|initial|build|addListener|css|indexOf|FilePath|FileName|getCache|ts_|setCache|buildTimeBar|update|buildElement|createElement|appendChild|showPanel|sub|add|showOrigin|ori|showReload|rel|join|getTimeRange|dt|end|startTime|endTime|clickSeconds|buildStrokeStyle|defaultTs|n1|n2|console|log|showRight|showLeft|12px|Date|originTime|checkOptions|240|tagName||toLowerCase|mouseup|use|strict|getScriptSelfPath||loadJsScriptCss|isElement|toElement|CANVAS|addClass|style|px|getContext|DIV|bar|innerHTML|offsetWidth|offsetHeight|clickTime|substr|rgba|getTime|1000|debug|clearRect|00ff00|555|fc0|14px|ccc|ddd|beginPath|moveTo|lineTo|strokeStyle|lineWidth|stroke|font|fillStyle|textAlign|fillText|999|addMinutes|HH|mm|aaa|isFunction|toJsonString|debounce|delay|100|timeout|5000|isObject|split|prototype|dayStart|window|resize|cancelBubble|switch|mousedown|mousemove|clientX|offsetLeft|mouseout|dblclick|OUI'.split('|'),0,{}))
